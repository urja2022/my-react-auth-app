{"version":3,"sources":["pages/dashboard/LocationLogPinPopup.jsx","pages/dashboard/UserLocation.jsx","components/map/imgToMarker.js","components/home/InfoWindowContent.jsx"],"names":["Transition","React","forwardRef","props","ref","Slide","direction","withTranslation","onClose","open","locationData","centerPoint","googleMarker","useState","lat","lng","centerPointData","setCenterPointData","libraries","selectedCenter","setSelectedCenter","useEffect","map","user","index","location","coordinates","Dialog","fullScreen","TransitionComponent","AppBar","sx","position","style","backgroundColor","Toolbar","IconButton","edge","color","onClick","right","top","googleMapsApiKey","process","mapContainerClassName","options","streetViewControl","scaleControl","mapTypeControl","panControl","zoomControl","rotateControl","keyboardShortcuts","draggable","zoom","center","loc","icon","url","onMouseOver","className","onMouseLeave","List","ListItem","paddingLeft","height","width","variant","moment","createdAt","format","address","UserLocation","state","useLocation","axiosPrivate","useAxiosPrivate","setLocationData","setCenterPoint","locationLogPopup","setLocationLogPopup","setGoogleMarker","CsvData","setCsvData","useQuery","a","get","USER_API_URL","userLocation","id","then","res","data","refetchOnWindowFocus","isLoading","locationLogs","groupedLocations","_","groupBy","getLocObj","Object","keys","date","arr","item","obj","push","csvReport","headers","label","key","filename","handleLocationClick","Promise","resolve","reject","isEmpty","image","getDataURL","files","userData","photos","value","error","LoadingScreen","Card","mt","bgcolor","length","v","labelId","_id","secondaryAction","py","borderBottom","disablePadding","ListItemButton","role","undefined","dense","ListItemText","primary","Box","display","justifyContent","Button","marginInline","fontSize","margin","canvas","document","createElement","ctx","getContext","img","Image","crossOrigin","src","onload","dataURL","centerX","centerY","radius","radiusOne","beginPath","arc","Math","PI","fillStyle","lineWidth","fill","moveTo","lineTo","strokeStyle","stroke","closePath","clip","drawImage","toDataURL","onerror","InfoWindowContent","userFullName","employeeData","isGroup","locationType","isBusiness","userId","name","distance","profilePic","trustRating","isOnline","onmouseleave","eventId","chatPermission","selfAsContact","businessId","selectedMapOption","status","eventStartsOn","eventStartTime","eventDescription","windowColor","setWindowColor"],"mappings":"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","file":"static/js/26.dd40b555.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Dialog from \"@mui/material/Dialog\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport { withTranslation } from \"react-i18next\";\r\nimport { GoogleMap, InfoWindow, LoadScript, Marker } from \"@react-google-maps/api\";\r\nimport Slide from \"@mui/material/Slide\";\r\nimport AppBar from \"@mui/material/AppBar\";\r\nimport Toolbar from \"@mui/material/Toolbar\";\r\nimport files from \"src/helpers/helpers\";\r\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\r\nimport getDataURL from \"src/components/map/imgToMarker\";\r\nimport InfoWindowContent from \"src/components/home/InfoWindowContent\";\r\nimport { Box, Button, Typography } from \"@material-ui/core\";\r\nimport { List, ListItem } from \"@mui/material\";\r\nimport TodayIcon from '@mui/icons-material/Today';\r\nimport moment from \"moment\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst LocationLogPinPopup = (props) => {\r\n  const { onClose, open, locationData, centerPoint, googleMarker } = props;\r\n\r\n  const [centerPointData, setCenterPointData] = useState({ lat: -26.204444, lng: 28.045556 });\r\n  const googleMapKey = process.env.REACT_APP_GOOGLE_MAP_LEY;\r\n  const [libraries] = useState([\"places\"]);\r\n  const [selectedCenter, setSelectedCenter] = useState(null);\r\n  // const [googleMarkerPin, setGoogleMarkerPin] = useState()\r\n  const handleClickClose = () => {\r\n    setCenterPointData({ lat: -26.204444, lng: 28.045556 });\r\n    onClose();\r\n  }\r\n  useEffect(() => {\r\n    if (centerPoint) {\r\n      locationData?.[0]\r\n        ?.map((user, index) => {\r\n          setCenterPointData({ lat: user?.location?.location?.coordinates?.[1], lng: user?.location?.location?.coordinates?.[0] })\r\n        })\r\n    }\r\n    // setGoogleMarkerPin(googleMarker?.[0]?.image?.profilePic)\r\n  }, [centerPoint, locationData])\r\n\r\n  const onmouseleave = () => {\r\n    setSelectedCenter(null)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Dialog fullScreen open={open} TransitionComponent={Transition}>\r\n        <AppBar sx={{ position: \"relative\" }} style={{ backgroundColor: \"#6E3FC6\" }}>\r\n          <Toolbar>\r\n            <IconButton\r\n              edge=\"start\"\r\n              color=\"inherit\"\r\n              onClick={handleClickClose}\r\n              aria-label=\"close\"\r\n              sx={{\r\n                position: 'absolute',\r\n                right: 25,\r\n                top: 12,\r\n              }}\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <LoadScript googleMapsApiKey={googleMapKey} libraries={libraries}>\r\n          <GoogleMap\r\n            mapContainerClassName=\"w-100 h-100 position-relative\"\r\n            options={{\r\n              streetViewControl: false,\r\n              scaleControl: true,\r\n              mapTypeControl: false,\r\n              panControl: false,\r\n              zoomControl: true,\r\n              rotateControl: false,\r\n            }}\r\n            keyboardShortcuts={false}\r\n            draggable={true}\r\n            zoom={13}\r\n            center={centerPointData}\r\n          >\r\n            {\r\n              centerPoint == true ? locationData?.[0]?.map((loc, index) => (\r\n                <Marker\r\n                  key={index}\r\n                  icon={{ url: googleMarker }}\r\n\r\n                  position={{\r\n                    lat: loc?.location?.location?.coordinates?.[1],\r\n                    lng: loc?.location?.location?.coordinates?.[0],\r\n\r\n                  }\r\n                  }\r\n                  onMouseOver={() => setSelectedCenter(loc)}\r\n                />\r\n\r\n              )) :\r\n                locationData?.map((loc, index) => (\r\n                  <Marker\r\n                    key={index}\r\n                    icon={{ url: googleMarker }}\r\n\r\n                    position={{\r\n                      lat: loc?.location?.location?.coordinates?.[1],\r\n                      lng: loc?.location?.location?.coordinates?.[0],\r\n                    }}\r\n                    onMouseOver={() => setSelectedCenter(loc)}\r\n                    onClick={() => setSelectedCenter(loc)}\r\n                  />\r\n                ))\r\n            }\r\n            <>\r\n              {\r\n                selectedCenter &&\r\n\r\n                <InfoWindow\r\n                  position={{\r\n                    lng: selectedCenter\r\n                      ? selectedCenter?.location?.location?.coordinates?.[0]\r\n                      : selectedCenter?.location?.location?.coordinates?.[0],\r\n                    lat: selectedCenter\r\n                      ? selectedCenter?.location?.location?.coordinates?.[1]\r\n                      : selectedCenter?.location?.location?.coordinates?.[1],\r\n                  }}\r\n                >\r\n\r\n                  <div className=\"info_window_container\" onMouseLeave={onmouseleave} >\r\n                    <List>\r\n                      <ListItem sx={{ paddingLeft: \"10px\" }}>\r\n                        <Button\r\n                          className=\"app_blank_btn d-flex align-items-start app_close_float_btn_topRight\"\r\n                          sx={{ height: \"40px\", width: \"40px\" }}\r\n                          variant=\"text\"\r\n                        >\r\n                          <TodayIcon style={{ color: \"#6200ee\" }} />\r\n                        </Button>\r\n                      </ListItem>\r\n                    </List>\r\n                    <List className=\"info_window_info_container\">\r\n                      <ListItem className=\"app_text_16_semibold\">{moment(selectedCenter?.createdAt).format(\"DD-MM-YYYY\")}</ListItem>\r\n                      <ListItem className=\"app_text_16_semibold\">{moment(selectedCenter?.createdAt).format(\"hh:mm A\")}</ListItem>\r\n                      <ListItem className=\"app_text_12_fw500 app_text_gray\">\r\n                        {selectedCenter?.location?.address}\r\n                      </ListItem>\r\n                    </List>\r\n                  </div>\r\n                </InfoWindow>\r\n\r\n              }\r\n            </>\r\n          </GoogleMap>\r\n        </LoadScript>\r\n      </Dialog>\r\n\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nLocationLogPinPopup.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default withTranslation()(LocationLogPinPopup);\r\n","import { Box, Button, Card, IconButton, List, ListItem, ListItemButton, ListItemText } from '@mui/material';\r\nimport moment from 'moment';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useQuery } from 'react-query';\r\nimport { useLocation } from 'react-router'\r\nimport { USER_API_URL } from 'src/api/axios';\r\nimport useAxiosPrivate from 'src/hooks/useAxiosPrivate';\r\nimport NearMeIcon from \"@mui/icons-material/NearMe\";\r\nimport LoadingScreen from 'src/components/LoadingScreen';\r\nimport LocationLogPinPopup from './LocationLogPinPopup';\r\nimport _ from \"lodash\";\r\nimport getDataURL from 'src/components/map/imgToMarker';\r\nimport files from 'src/helpers/helpers';\r\nimport { CSVLink } from 'react-csv';\r\nimport FileUploadOutlinedIcon from '@mui/icons-material/FileUploadOutlined';\r\n\r\n\r\n\r\nconst UserLocation = () => {\r\n    const { state } = useLocation();\r\n    const axiosPrivate = useAxiosPrivate();\r\n    const [locationData, setLocationData] = useState([]);\r\n    const [locationList, setLocationList] = useState([]);\r\n    const [centerPoint, setCenterPoint] = useState(false);\r\n    const [locationLogPopup, setLocationLogPopup] = useState(false)\r\n    const [googleMarker, setGoogleMarker] = useState();\r\n    const [CsvData, setCsvData] = useState([]);\r\n\r\n    const { isLoading, data: locationLogs } = useQuery(\r\n        \"locationData\",\r\n        async () => {\r\n            return await axiosPrivate\r\n                .get(USER_API_URL.userLocation + state?.user?.id)\r\n                .then((res) => res.data);\r\n        },\r\n        { refetchOnWindowFocus: false }\r\n    );\r\n\r\n    const groupedLocations = _.groupBy(locationLogs, 'date');\r\n    const getLocObj = Object.keys(groupedLocations).map((date) => {\r\n        return {\r\n            date,\r\n            location: groupedLocations[date]\r\n        };\r\n    });\r\n\r\n    useEffect(() => {\r\n        var arr = [];\r\n        getLocObj?.map((item) => {\r\n            item?.location?.map((loc) => {\r\n                var obj = {\r\n                    date: loc?.createdAt ? moment(loc?.createdAt).format(\"MMM DD YYYY h:mm A\") : '',\r\n                    address: loc?.location?.address ? loc?.location?.address : '',\r\n                    coordinates: loc?.location?.location?.coordinates ? loc?.location?.location?.coordinates?.[1] + '-' + loc?.location?.location?.coordinates?.[0] : ''\r\n                }\r\n                arr.push(obj);\r\n            });\r\n\r\n        })\r\n        setCsvData(arr)\r\n    }, [locationLogs]);\r\n\r\n    const headers = [\r\n        { label: \"date\", key: \"date\" },\r\n        { label: \"address\", key: \"address\" },\r\n        { label: \"coordinates\", key: \"coordinates\" },\r\n\r\n    ];\r\n    let csvReport = {\r\n        data: CsvData,\r\n        headers: headers,\r\n        filename: 'beemz-users-location-logs.csv'\r\n    };\r\n    const handleLocationClick = (data) => {\r\n        setLocationData(data?.user)\r\n        setCenterPoint(data?.center);\r\n        setLocationLogPopup(true);\r\n        const myPromise = new Promise((resolve, reject) => {\r\n            if (!_.isEmpty(data?.user)) {\r\n                data?.user?.map((image) => {\r\n                    resolve(\r\n                        getDataURL(\r\n                            files(image?.userData?.photos, \"image\")\r\n                            ,\r\n                            \"#6200ee\"\r\n                        )\r\n                    );\r\n                })\r\n\r\n            } else {\r\n                reject(\"error\");\r\n            }\r\n        });\r\n        myPromise.then(\r\n            function (value) {\r\n                setGoogleMarker(value);\r\n            },\r\n            function (error) {\r\n            }\r\n        );\r\n    }\r\n    const locationLogPopupClose = () => {\r\n        setLocationLogPopup(false);\r\n        setCenterPoint(false);\r\n        setLocationData([]);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {isLoading ? <LoadingScreen />\r\n                :\r\n                <>\r\n                    <div className=\"dashboard_header mb-4\">\r\n                        <h4 className=\"app_text_20_semibold mb-0 d-flex align-items-center\">user locations</h4>\r\n                    </div>\r\n                    <Card>\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-8\">\r\n                                <List sx={{ width: \"100%\", mt: 2, bgcolor: \"background.paper\" }}>\r\n                                    {getLocObj?.length > 0 ?\r\n                                        getLocObj?.map((v) => {\r\n                                            const labelId = `checkbox-list-label-${v?.location?._id}`;\r\n                                            return (\r\n                                                <ListItem\r\n                                                    key={v.date}\r\n                                                    secondaryAction={\r\n                                                        <IconButton\r\n                                                            onClick={() =>\r\n                                                                handleLocationClick({ center: true, user: [v?.location] })\r\n                                                            }\r\n                                                            edge=\"end\"\r\n                                                            aria-label=\"comments\"\r\n                                                        >\r\n                                                            <NearMeIcon sx={{ color: \"#6200EE\" }} />\r\n                                                        </IconButton>\r\n                                                    }\r\n                                                    sx={{ py: 0.8, borderBottom: \"1px solid gainsboro\" }}\r\n                                                    disablePadding\r\n                                                >\r\n                                                    <ListItemButton role={undefined} dense>\r\n                                                        <ListItemText\r\n                                                            id={labelId}\r\n                                                            primary={moment(v?.date).format(\"DD/MM/YYYY\")}\r\n                                                        />\r\n                                                    </ListItemButton>\r\n                                                </ListItem>\r\n                                            );\r\n                                        })\r\n                                        : \"user location not found\"}\r\n                                </List>\r\n                                <Box\r\n                                    sx={{\r\n                                        mt: 3,\r\n                                        width: \"100%\",\r\n                                        display: \"flex\",\r\n                                        justifyContent: \"center\",\r\n                                    }}\r\n                                >\r\n                                    {\r\n\r\n                                        locationLogs?.length > 0 ?\r\n                                            <>\r\n                                                <Button\r\n                                                    onClick={() =>\r\n                                                        handleLocationClick({\r\n                                                            center: false, user: locationLogs\r\n                                                        })\r\n                                                    }\r\n                                                    className=\"app_text_transform\"\r\n                                                    variant=\"contained\"\r\n                                                    sx={{ bgcolor: \"#6200EE\", \"&:hover\": { bgcolor: \"#6200EE\" }, marginInline: '2px' }}\r\n                                                >\r\n                                                    show on map\r\n                                                </Button>\r\n                                                <CSVLink  {...csvReport} >\r\n                                                    <Button className=\"app_text_transform\"\r\n                                                        variant=\"contained\"\r\n                                                        sx={{ bgcolor: \"#6200EE\", \"&:hover\": { bgcolor: \"#6200EE\" } }}>\r\n                                                        export location logs\r\n                                                        <FileUploadOutlinedIcon style={{ fontSize: 18, color: \"whitesmoke\", margin: '2px' }} />\r\n                                                    </Button></CSVLink>\r\n\r\n\r\n                                            </>\r\n                                            : ''\r\n                                    }\r\n\r\n                                </Box>\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n                </>\r\n\r\n            }\r\n            <LocationLogPinPopup\r\n                googleMarker={googleMarker}\r\n                centerPoint={centerPoint}\r\n                locationData={locationData}\r\n                open={locationLogPopup}\r\n                onClose={locationLogPopupClose}\r\n            />\r\n        </>\r\n\r\n    )\r\n\r\n\r\n}\r\n\r\nexport default UserLocation","export default function getDataURL(url, color) {\r\n\r\n  return new Promise((resolve, reject) => {\r\n    var canvas = document.createElement(\"CANVAS\");\r\n    var ctx = canvas.getContext(\"2d\");\r\n    var img = new Image();\r\n    img.crossOrigin = \"Anonymous\";\r\n    img.src = url;\r\n\r\n    img.onload = function () {\r\n      var dataURL;\r\n      canvas.height = 70;\r\n      canvas.width = 70;\r\n      var centerX = canvas.width / 2;\r\n      var centerY = canvas.height / 2;\r\n      var radius = centerX / 2;\r\n      var radiusOne = centerX / 2;\r\n\r\n      ctx.beginPath();\r\n      ctx.arc(centerX, centerY, radiusOne, 0, 2 * Math.PI, false);\r\n      ctx.fillStyle = \"rgba(255,255,255, 1.0)\";\r\n      ctx.lineWidth = 4;\r\n      ctx.fill();\r\n\r\n      ctx.beginPath();\r\n      ctx.moveTo(35, centerY + radius);\r\n      ctx.lineTo(35, centerY + radius + 10);\r\n      ctx.lineWidth = 6;\r\n      ctx.strokeStyle = color;\r\n      ctx.stroke();\r\n\r\n      ctx.beginPath();\r\n      ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);\r\n      ctx.strokeStyle = color;\r\n      ctx.lineWidth = 6;\r\n      ctx.stroke();\r\n      ctx.closePath();\r\n      ctx.clip();\r\n      ctx.drawImage(img, centerX / 2.2, centerY / 2.2, 40, 40);\r\n\r\n      dataURL = canvas.toDataURL();\r\n      return resolve(dataURL);\r\n    };\r\n\r\n    img.onerror = function () {\r\n      img.src =\r\n        \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAUKSURBVFiFtZfbb1RVFMZ/65zTaWeG6UxnpuVOoUOpQjFBuRhULjEgWggBpepf4FNF33wAcsLt1YAmJsY3TYAiBhRqeSAFwyUIQpRwtVS5lNLLtENv087Mme1D6TBtz3SmEL+3vdfaa31nn3XbwgRhmg1GhyM2V7eS85TCBSBCv6Vrd4IxR6Nprk5MxJ7k5rTWEdY960E2Cmo94M+g2qOgAeFgINFzxDSrYy9GQCnZuqf+gyTsFcXcXMimHb6Pkj3+5MXvTNNMTphAjVk3Q3Q5DLw+WmboOmUzC/H7nAgQ7orS9LCbhGWNpQEXDEls+XLbhuacCdTsrFuEyDGBmaNliysns3rZLFzOvBH7fdE4py7c5+qNVjuTLaKSm/btqLqYlcDWnSeWKdEaAOdo2Zo3Slm+aLqdgxTO/tHMqQv37ERRJbLqq23rfk/f1NIXn+2pn6pEO2Ln/KWyQFbnAG++Np2K2bYx6hSljtWYdTPsCSglyaT6CbD1smLJDLttW6xcOubPDWOK6HIIpVI3nyKwddfJj7EJOACP28HUYnfOBKaWuJnkcmQSL/90V/2HIwiYZq1DidqZ6YR3Un7Ozofh84xzRthbs78uP0WgyyjcAIQy6ccTGdM4IwZjY1MyDXOkW95LEVBKbRxPOxyJZjM4AgMxi87ugfGVFBsBNNNsMICq8XQTVpK/brfnTODarXYsK+utVW2prdW1iN5XTubansKZSw/o7s1a2on0DHL60oNceAZLGt0hzdKMsly0+/rjfH/0Op2RzFcbjkT54ecb9EfjuZhE4hIyNAuvyqknQkckyjcH/mTJK5NZEApQHHADivZwP9cbw1y61mrbDzIS0MVn5Krs9TioLA9QOqUAdwFoqodwWwQAXdOpLMtnzrRZ3Hs8wLU74Zx+F4CR1Hki48RL6bRCViyeSdksL53hDgai/ZCE9CPKGppB3A54tcLD28vn0HQvwm+XH3K/pTujbWWpiKFE7gpqLDNdY+1bs1lcOSXVsYr8Adpb4yQS9v9YNwx8RX4ECJX6KCv1cfnaY06e/dc2KzTNaNSCMUcjMIKmiLB57TyWpDkf3vcHg4iMDRoRwR8IomnP2osASxZOYfOacru+39FSEWnSTHN1AsWZdMnC8iAvh+wz0zDy8PkDY/Z9RX7y8uzr//y5ARaUB0cR5vjh6mprqBJqHEgXLpg3Unk0nE4X7kme1No9yYPTNX6zqqwYaVMhR+FpKR4sLv5RCY0pBwXZk6PQ6yM/vwCHI59Cry+rvqtgxAT1jz/R/WuKwLefLI5Lku3D0kdtvVkNighFgUDGmBiN5taeZwslXwxPzKmI2b993SEFFwDOX2nOqflomo6m6Vn1BmIW56+0DBGHc/u3v3M4ZSPtk5SuyfvAw+7eGAdP3CIWz72qZcJgzOLg8Zv09A0CtCQt9REiqbwfc3c1u+uXilKnAWeRt4D1q0KUzfQ+l/O79yOcOH2Xru5BgKgoVu7b8e6ldJ2cxvIZkz0sml9CxRw/blee3ZEUevtj3G7q4urNVppbU7H0SIlsGj0RZyQA8PnuX6ZbyqgFlqcr+7wFlATceFwGBflD2TIwmKCnL05bZz+RJwMj6qrAOcvSq7821z6y8/M/Ps24h2Lvcz/N0mGatY5Ow1P1dIyqAjJVqg4RjotSx3xWb92LP05tsKW2Vi9pdIc0pZeLpTwASpeepFh/t83tu3u4unpCqfMfIzLR3v5BgA8AAAAASUVORK5CYII=\";\r\n      img.onload();\r\n    };\r\n  });\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { List, ListItem } from '@mui/material'\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nconst InfoWindowContent = ({ userFullName, employeeData, isGroup, locationType, userId, isBusiness, name, profilePic, trustRating, distance, isOnline, onmouseleave, chatPermission, selfAsContact, businessId, selectedMapOption, status, eventId, eventStartsOn, eventStartTime, eventDescription }) => {\r\n  const [windowColor, setWindowColor] = useState(\"\");\r\n  useEffect(() => {\r\n    if (isBusiness) {\r\n      setWindowColor(\"business\");\r\n    } else if (!_.isEmpty(employeeData)) {\r\n      setWindowColor(\"employee\");\r\n    } else if (isGroup) {\r\n      setWindowColor(\"group\");\r\n    } else if (locationType === \"geo\") {\r\n      setWindowColor(\"google\");\r\n    } else if (eventId) {\r\n      setWindowColor(\"event\");\r\n    }\r\n    else {\r\n      setWindowColor(\"person\");\r\n    }\r\n  }, [employeeData, isBusiness, locationType]);\r\n\r\n  return (\r\n    <div className='info_window_container' onMouseLeave={onmouseleave} >\r\n      {\r\n        eventId ? '' :\r\n          <div className={`${windowColor} info_window_distance_container`}>\r\n            <div className='d-flex flex-column align-items-center justify-content-center'>\r\n              <span className='app_text_16_semibold text-white mb-1'>{distance}</span>\r\n              <span className='app_text_16_500 text-white'>km</span>\r\n            </div>\r\n          </div>\r\n      }\r\n\r\n      <List className='info_window_info_container'>\r\n        <ListItem className=\"app_text_16_500 \">{userFullName}</ListItem>\r\n        <ListItem className=\"app_text_14 app_text_gray\">{eventDescription}</ListItem>\r\n\r\n        {\r\n          eventId ?\r\n            <ListItem className=\"app_text_12 app_text_gray \">{name ? `@${name}` :\r\n              moment(eventStartsOn).format(\"MMM DD YYYY\")\r\n              + '-' + eventStartTime || ''} </ListItem>\r\n            :\r\n            <ListItem>\r\n              <div className='d-flex align-items-center'>\r\n                <span className={`live_status_badge ${isOnline ? 'online' : 'offline'}`}></span><span className=' app_text_12 app_text_gray ms-1'>{isOnline ? 'Available' : 'not available now '}</span>\r\n              </div>\r\n            </ListItem>\r\n        }\r\n\r\n      </List>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoWindowContent"],"sourceRoot":""}