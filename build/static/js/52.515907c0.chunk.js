(this["webpackJsonpbeemz-web"]=this["webpackJsonpbeemz-web"]||[]).push([[52],{1041:function(e,t,n){"use strict";n.r(t);var a=n(9),i=n(12),r=n.n(i),s=n(21),o=n(5),c=n(1),l=n(741),u=n(743),d=n(744),b=n(507),j=n(862),v=n(863),h=n(864),m=n(865),O=n(742),p=n(884),f=n(135),g=n.n(f),x=n(89),_=n(870),w=n(852),y=n(298),k=n(69),S=n(7),N=n(52),C=n(35),A=n.n(C),D=n(31),R=n(500),q=n(501),z=n(899),P=n(754),E=n(46),F=n(53),L=n(61),M=n(34),I=n(25),U=n(23),V=n(33),Y=n(32),B=n(90),H=n(91),J=n.n(H),T=n(0);n(65);function Q(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}var W=Object(S.a)(l.a)((function(e){e.theme;return{"&:nth-of-type(odd)":{backgroundColor:"#ffffff"},"&:nth-of-type(even)":{background:"linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), #F4F5F7"},"& td, & th":{border:0}}}));t.default=function(){var e,t=Object(c.useState)(0),n=Object(o.a)(t,2),i=n[0],f=n[1],S=Object(c.useState)(10),C=Object(o.a)(S,2),H=C[0],G=C[1],K=Object(c.useState)("asc"),X=Object(o.a)(K,2),Z=X[0],$=X[1],ee=Object(c.useState)("name"),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],ie=Object(c.useState)(""),re=Object(o.a)(ie,2),se=re[0],oe=re[1],ce=Object(c.useState)([]),le=Object(o.a)(ce,2),ue=le[0],de=le[1],be=Object(E.a)(),je=Object(c.useState)(!0),ve=Object(o.a)(je,2),he=ve[0],me=ve[1],Oe=Object(F.b)().enqueueSnackbar,pe=Object(M.c)((function(e){return e.permissions})),fe=Object(L.a)(),ge=Object(_.a)(fe.breakpoints.down("md")),xe=Object(I.g)(),_e=Object(c.useState)(!1),we=Object(o.a)(_e,2),ye=we[0],ke=we[1],Se=Object(c.useState)(!1),Ne=Object(o.a)(Se,2),Ce=Ne[0],Ae=Ne[1],De=Object(c.useState)([]),Re=Object(o.a)(De,2),qe=Re[0],ze=Re[1],Pe=Object(c.useState)(!1),Ee=Object(o.a)(Pe,2),Fe=Ee[0],Le=Ee[1];function Me(){return(Me=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Le(!0),e.next=3,Ie();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ie=Object(V.useMutation)(Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.post(U.n.removeArchiveUser,{id:Ce._id,type:null===Ce||void 0===Ce?void 0:Ce.status});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(e){Oe(e.data.message,{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3})},onError:function(e){var t,n,a;if((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data.errors)||(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)){var i,r,s,o,c=null===e||void 0===e||null===(i=e.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.errors,l=null===e||void 0===e||null===(s=e.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message;l?Oe(l,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}):c&&Object.keys(c).map((function(e){return Oe(c[e],{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3})}))}},onSettled:function(){Le(!1),We(),Te()}}).mutateAsync;Object(c.useEffect)((function(){var e=[];ue.map((function(t){var n=new Date(null===t||void 0===t?void 0:t.createdAt).toLocaleString(),a={name:(null===t||void 0===t?void 0:t.businessId)?null===t||void 0===t?void 0:t.businessName:null===t||void 0===t?void 0:t.userName,email:(null===t||void 0===t?void 0:t.businessId)?null===t||void 0===t?void 0:t.businessEmail:null===t||void 0===t?void 0:t.userEmail,mobile:(null===t||void 0===t?void 0:t.mobile)?null===t||void 0===t?void 0:t.mobile:"-",restore_request_type:(null===t||void 0===t?void 0:t.businessId)?"Business":" User",createdAt:null!==n&&void 0!==n?n:"-"};e.push(a)})),ze(e)}),[ue]);var Ue={data:qe,headers:[{label:"name",key:"name"},{label:"email",key:"email"},{label:"mobile",key:"mobile"},{label:"restore_request_type",key:"restore_request_type"},{label:"createdAt",key:"createdAt"}],filename:"beemz-restore-deleted-users.csv"};function Ve(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(s.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.get(U.n.getDeletedReqList,{params:{page:t+1,search:n,limit:H}});case 2:return a=e.sent,e.abrupt("return",a.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Be=Object(V.useQuery)(["userArchivedList",i,se],(function(){return Ve(i,se)}),{keepPreviousData:!0}),He=Be.isLoading,Je=Be.data,Te=Be.refetch;if(Object(c.useEffect)((function(){Je&&(de(null===Je||void 0===Je?void 0:Je.data),G(0!=(null===Je||void 0===Je?void 0:Je.metadata.length)?null===Je||void 0===Je?void 0:Je.metadata[0].limit:10)),0!=(null===Je||void 0===Je?void 0:Je.metadata.length)&&1==(null===Je||void 0===Je?void 0:Je.metadata[0].hasMoreData)&&Ve(i+1),setTimeout((function(){me(!1)}),1800)}),[Je]),He)return Object(T.jsx)(N.a,{});var Qe=function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}(ue,function(e,t){return"desc"===e?function(e,n){return Q(e,n,t)}:function(e,n){return-Q(e,n,t)}}(Z,ne)),We=function(){ke(!1),Le(!1)};return Object(T.jsx)(T.Fragment,{children:he?Object(T.jsx)(N.a,{}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"dashboard_header mb-4",children:[Object(T.jsxs)(u.a,{className:"dashboard_searchbox col-lg-4",children:[Object(T.jsx)(d.a,{children:Object(T.jsx)(k.a,{})}),Object(T.jsx)(b.a,{fullWidth:!0,sx:{flex:1},placeholder:"search user name...",onChange:function(e){return oe(e.target.value.trim()),void Ve(i,se)}})]}),Object(T.jsxs)(w.a,{direction:"row",className:"d-flex align-items-center",spacing:2,children:[Object(T.jsx)(D.a,{title:"refresh",placement:"bottom",children:Object(T.jsx)(y.a,{className:"dashboard_light_bg_icon_btn",children:Object(T.jsx)(g.a,{style:{fontSize:18,color:"#6200ee"}})})}),"1"==(null===pe||void 0===pe||null===(e=pe.users)||void 0===e?void 0:e.substring(1,2))?Object(T.jsx)(D.a,{title:"export-users",placement:"bottom",children:Object(T.jsx)(y.a,{className:"dashboard_light_bg_icon_btn",children:Object(T.jsx)(B.CSVLink,Object(a.a)(Object(a.a)({},Ue),{},{children:Object(T.jsx)(J.a,{style:{fontSize:18,color:"#6200ee"}})}))})}):""]})]}),Object(T.jsxs)(R.a,{fullScreen:ge,open:ye,onClose:We,"aria-labelledby":"responsive-dialog-title",children:[Object(T.jsx)(q.a,{id:"responsive-dialog-title",className:"m-auto",children:"Are you sure you want to remove user from archive?"}),Object(T.jsx)(z.a,{}),Object(T.jsxs)(P.a,{className:"m-auto",children:[Object(T.jsx)(y.a,{className:"theme_button_view",variant:"contained",autoFocus:!0,onClick:We,children:"Cancel"}),Object(T.jsx)(y.a,{className:"theme_button_view",variant:"contained",disabled:Fe,onClick:function(){return function(){return Me.apply(this,arguments)}()},autoFocus:!0,children:"restore"})]})]}),Object(T.jsxs)(j.a,{children:[Object(T.jsx)(v.a,{children:Object(T.jsxs)(h.a,{children:[Object(T.jsx)(x.a,{headLabel:[{id:"userName",label:"name",alignRight:!1},{id:"email",label:"email",alignRight:!1},{id:"mobile",label:"mobile",alignRight:!1},{id:"restore_request_type",label:"restore request type",alignRight:!1},{id:"createdAt",label:"date",alignRight:!1},{id:"action",label:"action",alignRight:!1}],rowCount:0,onRequestSort:function(e,t){$(ne===t&&"asc"===Z?"desc":"asc"),ae(t)}}),(null===ue||void 0===ue?void 0:ue.length)>0?Object(T.jsx)(m.a,{children:null===Qe||void 0===Qe?void 0:Qe.map((function(e,t){return Object(T.jsxs)(W,{children:[Object(T.jsx)(O.a,{component:"th",scope:"row",children:0==(null===e||void 0===e?void 0:e.is_business)?e.userName:e.businessName}),Object(T.jsx)(O.a,{component:"th",scope:"row",children:0==(null===e||void 0===e?void 0:e.is_business)?e.userEmail:e.businessEmail}),Object(T.jsx)(O.a,{component:"th",scope:"row",children:(null===e||void 0===e?void 0:e.mobile)?e.mobile:"-"}),Object(T.jsx)(O.a,{component:"th",scope:"row",children:0==(null===e||void 0===e?void 0:e.is_business)?"User":"Business"}),Object(T.jsxs)(O.a,{align:"left",children:[" ",A()(e.createdAt).format("MMM DD YYYY h:mm A")]}),Object(T.jsx)(O.a,{children:Object(T.jsxs)(w.a,{direction:"row",spacing:3,children:[Object(T.jsx)(D.a,{title:"delete user & business",placement:"bottom",children:Object(T.jsx)(y.a,{className:"theme_button",variant:"contained",onClick:function(t){return Ae(e),void ke(!0)},children:"restore"})}),Object(T.jsx)(D.a,{title:"view user",placement:"bottom",children:Object(T.jsx)(y.a,{className:"invalid_button",variant:"contained",onClick:function(){var t;1==(null===(t=e)||void 0===t?void 0:t.is_business)?xe(Y.c.general.restoreBusinessView,{state:{id:t._id}}):xe(Y.c.general.restoreUserView,{state:{id:t._id}})},children:"View"})})]})})]},t)}))}):Object(T.jsx)(m.a,{children:Object(T.jsx)(l.a,{children:Object(T.jsx)(O.a,{align:"center",colSpan:6,sx:{py:5},children:Object(T.jsx)("span",{className:"app_text_16_semibold",children:"no data found"})})})})]})}),Object(T.jsx)(p.a,{component:"div",rowsPerPageOptions:[10,20,50,100],count:0!=(null===Je||void 0===Je?void 0:Je.metadata.length)?null===Je||void 0===Je?void 0:Je.metadata[0].total:0,rowsPerPage:H,page:i,onPageChange:function(e,t){f(t)},onRowsPerPageChange:function(e){G(parseInt(e.target.value,10)),f(0),setTimeout((function(){Te()}),500)}})]})]})})}}}]);
//# sourceMappingURL=52.515907c0.chunk.js.map