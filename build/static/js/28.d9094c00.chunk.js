(this["webpackJsonpbeemz-web"]=this["webpackJsonpbeemz-web"]||[]).push([[28],{1039:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return re}));var r=a(9),c=a(12),n=a.n(c),s=a(21),i=a(5),o=a(1),l=a(741),u=a(744),d=a(862),b=a(863),j=a(864),p=a(865),h=a(742),O=a(745),m=a(910),v=a(7),f=a(915),x=a.n(f),g=a(135),_=a.n(g),y=a(33),w=a(23),S=a(89),N=a(46),C=a(356),k=a(914),T=a(870),H=a(299),z=a(68),V=a(852),F=a(298),L=a(500),E=a(501),M=a(899),R=a(754),D=a(748),q=a(893),J=a(885),W=a(879),A=a(902),B=a(69),P=a(95),Z=a.n(P),G=a(59),I=a(19),Q=a(53),U=a(52),K=a(31),X=a(61),Y=a(90),$=a(91),ee=a.n($),te=a(34),ae=a(0);a(65);function re(){var e,t=Object(o.useState)(""),a=Object(i.a)(t,2),c=a[0],f=a[1],g=Object(o.useState)("asc"),P=Object(i.a)(g,2),$=P[0],re=P[1],ce=Object(o.useState)("name"),ne=Object(i.a)(ce,2),se=ne[0],ie=ne[1],oe=Object(o.useState)(""),le=Object(i.a)(oe,2),ue=le[0],de=le[1],be=Object(o.useState)([]),je=Object(i.a)(be,2),pe=je[0],he=je[1],Oe=Object(o.useState)("1"),me=Object(i.a)(Oe,2),ve=me[0],fe=me[1],xe=Object(o.useState)(""),ge=Object(i.a)(xe,2),_e=ge[0],ye=ge[1],we=Object(N.a)(),Se=Object(o.useState)(!0),Ne=Object(i.a)(Se,2),Ce=Ne[0],ke=Ne[1],Te=Object(Q.b)().enqueueSnackbar,He=Object(o.useState)(""),ze=Object(i.a)(He,2),Ve=ze[0],Fe=ze[1],Le=Object(o.useState)(!1),Ee=Object(i.a)(Le,2),Me=Ee[0],Re=Ee[1],De=Object(o.useState)([]),qe=Object(i.a)(De,2),Je=qe[0],We=qe[1],Ae=Object(te.c)((function(e){return e.permissions})),Be=Object(X.a)(),Pe=Object(T.a)(Be.breakpoints.down("md")),Ze=Object(v.a)(l.a)((function(e){e.theme;return{"&:nth-of-type(odd)":{backgroundColor:"#ffffff"},"&:nth-of-type(even)":{background:"linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), #F4F5F7"},"& td, & th":{border:0}}}));Object(o.useEffect)((function(){var e=[];pe.map((function(t){var a={subject:(null===t||void 0===t?void 0:t.subject)?null===t||void 0===t?void 0:t.subject:"-",reportType:1==(null===t||void 0===t?void 0:t.reportType)?"Common":2==(null===t||void 0===t?void 0:t.reportType)?"User":3==(null===t||void 0===t?void 0:t.reportType)?"Business":4==(null===t||void 0===t?void 0:t.reportType)?"Group":5==(null===t||void 0===t?void 0:t.reportType)?"Feed":6==(null===t||void 0===t?void 0:t.reportType)?"Event":"Social Media"};e.push(a)})),We(e)}),[pe]);var Ge={data:Je,headers:[{label:"subject",key:"subject"},{label:"reportType",key:"reportType"}],filename:"beemz-report-subject.csv"},Ie=I.d().shape({subject:I.e().min(2,"subject can set of between 2 and 255 characters!").max(255,"subject can set of between 2 and 255 characters!").required("subject is required")}),Qe=Object(G.e)({initialValues:{subject:""},validationSchema:Ie,onSubmit:function(){var e=Object(s.a)(n.a.mark((function e(t,a){var r,c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.resetForm,a.setFieldError,c=a.setSubmitting,s={subject:t.subject,reportType:ve},""!=_e){e.next=7;break}return e.next=5,Ue(s);case 5:e.next=9;break;case 7:return e.next=9,Ke(s);case 9:fe("1"),r(),c(!1);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}),Ue=Object(y.useMutation)(function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.post(w.n.addReportSubject,JSON.stringify(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){e.data;tt(),Te("report subject add successfully ",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),ot()},onError:function(e){var t,a,r,c,n=e.response.data.errors;(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)&&Te(null===(r=e.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3});Object.keys(n).forEach((function(e){jt("subject"===e?"subject":e,n[e])}))}}).mutateAsync,Ke=Object(y.useMutation)(function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.put(w.n.updateReportSubject+_e,JSON.stringify(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){e.data;tt(),Te("report subject update successfully ",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),ot()},onError:function(e){var t,a,r,c,n=e.response.data.errors;(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)&&Te(null===(r=e.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3});Object.keys(n).forEach((function(e){jt("name"===e?"name":e,n[e])}))}}).mutateAsync;function Xe(){return(Xe=Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.get(w.n.getReportSubjectList);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ye=Object(y.useQuery)(["reportSubjectList"],(function(){return function(){return Xe.apply(this,arguments)}()}),{keepPreviousData:!0}),$e=Ye.isLoading,et=Ye.data,tt=Ye.refetch;Object(o.useEffect)((function(){et&&he(et),setTimeout((function(){ke(!1)}),1800)}),[et]);var at=function(){Re(!1)},rt=function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.delete(w.n.deleteReportSubject+Ve);case 2:200==e.sent.status?Te("report subject delete successfully",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}):Te("something went wrong",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),tt(),at();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=Object(o.useState)(!1),nt=Object(i.a)(ct,2),st=nt[0],it=nt[1],ot=function(){it(!1)},lt=Qe.errors,ut=Qe.touched,dt=Qe.setFieldValue,bt=Qe.handleSubmit,jt=Qe.setFieldError,pt=Qe.getFieldProps;return $e?Object(ae.jsx)(U.a,{}):Object(ae.jsx)(ae.Fragment,{children:Ce?Object(ae.jsx)(U.a,{}):Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)("div",{className:"dashboard_header mb-4",children:[Object(ae.jsxs)(H.a,{className:"dashboard_searchbox col-lg-4",children:[Object(ae.jsx)(u.a,{sx:{padding:"12px"},children:Object(ae.jsx)(B.a,{})}),Object(ae.jsx)(z.c,{fullWidth:!0,sx:{flex:1},placeholder:"search report subject...",onChange:function(e){de(e.target.value.trim())}})]}),Object(ae.jsxs)(V.a,{direction:"row",className:"d-flex align-items-center",spacing:2,children:[Object(ae.jsx)(K.a,{title:"add subject",placement:"bottom",children:Object(ae.jsx)(F.a,{className:"dashboard_light_bg_icon_btn",onClick:function(){dt("subject",""),fe("1"),ye(""),f("add"),it(!0)},children:Object(ae.jsx)(x.a,{style:{fontSize:18,color:"#6200ee"}})})}),"1"==(null===Ae||void 0===Ae||null===(e=Ae.report)||void 0===e?void 0:e.substring(1,2))?Object(ae.jsx)(K.a,{title:"export-report-subject",placement:"bottom",children:Object(ae.jsx)(F.a,{className:"dashboard_light_bg_icon_btn",children:Object(ae.jsx)(Y.CSVLink,Object(r.a)(Object(r.a)({},Ge),{},{children:Object(ae.jsx)(ee.a,{style:{fontSize:18,color:"#6200ee"}})}))})}):"",Object(ae.jsx)(K.a,{title:"refresh",placement:"bottom",children:Object(ae.jsx)(F.a,{className:"dashboard_light_bg_icon_btn",children:Object(ae.jsx)(_.a,{style:{fontSize:18,color:"#6200ee"}})})})]})]}),Object(ae.jsxs)(L.a,{fullScreen:Pe,open:Me,onClose:at,"aria-labelledby":"responsive-dialog-title",children:[Object(ae.jsx)(E.a,{id:"responsive-dialog-title",className:"m-auto",children:"are you sure you want to delete?"}),Object(ae.jsx)(M.a,{}),Object(ae.jsxs)(R.a,{className:"m-auto",children:[Object(ae.jsx)(F.a,{className:"theme_button_view",variant:"contained",autoFocus:!0,onClick:at,children:"cancel"}),Object(ae.jsx)(F.a,{className:"theme_button",variant:"contained",onClick:function(){return rt()},autoFocus:!0,children:"delete"})]})]}),Object(ae.jsx)(d.a,{children:Object(ae.jsx)(b.a,{children:Object(ae.jsxs)(j.a,{children:[Object(ae.jsx)(S.a,{headLabel:[{id:"subject",label:"subject",alignRight:!1},{id:"reportType",label:"report type",alignRight:!1},{id:"action",label:"action",alignRight:!1}],onRequestSort:function(e,t){re(se===t&&"asc"===$?"desc":"asc"),ie(t)}}),Object(ae.jsx)(p.a,{children:pe.filter((function(e){var t;return null===e||void 0===e||null===(t=e.subject)||void 0===t?void 0:t.toLowerCase().includes(ue.toLowerCase())})).map((function(e,t){return Object(ae.jsxs)(Ze,{children:[Object(ae.jsx)(h.a,{component:"th",scope:"row",children:e.subject}),Object(ae.jsx)(h.a,{component:"th",scope:"row",children:1==e.reportType?"common":2==e.reportType?"user":3==e.reportType?"business":4==e.reportType?"group":5==e.reportType?"feed":6==e.reportType?"event":"social media"}),Object(ae.jsx)(h.a,{children:Object(ae.jsxs)(V.a,{direction:"row",spacing:3,children:[Object(ae.jsx)(K.a,{title:"subject edit",placement:"bottom",children:Object(ae.jsx)(F.a,{sx:{"&:hover":{bgcolor:"transparent"}},onClick:function(){return function(e){dt("subject",e.subject),fe(e.reportType),ye(e._id),f("update"),it(!0)}(e)},variant:"text",className:"user_list_row_btn",children:Object(ae.jsx)(C.a,{})})})," ",Object(ae.jsx)(K.a,{title:"subject delete",placement:"bottom",children:Object(ae.jsx)(F.a,{variant:"text",className:"user_list_row_btn",onClick:function(){return t=e._id,Fe(t),void Re(!0);var t},children:Object(ae.jsx)(k.a,{})})})]})})]},t)}))})]})})}),Object(ae.jsx)(D.a,{open:st,onClose:ot,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:Object(ae.jsxs)(O.a,{className:"modal_card modal_lg db_trust_level_modal_box",children:[Object(ae.jsxs)("div",{className:"modal_card_header",children:[Object(ae.jsx)("div",{className:"left_part",children:Object(ae.jsx)("h4",{children:c})}),Object(ae.jsx)("div",{className:"right_part",children:Object(ae.jsx)(F.a,{className:"dashboard_light_bg_icon_btn",onClick:ot,"aria-label":"delete",children:Object(ae.jsx)(Z.a,{})})})]}),Object(ae.jsx)("div",{className:"modal_card_body",children:Object(ae.jsx)(G.d,{value:Qe,children:Object(ae.jsxs)(G.c,{autoComplete:"off",noValidate:!0,onSubmit:bt,children:[Object(ae.jsxs)("div",{className:"row",children:[Object(ae.jsx)("div",{className:"col-12",children:Object(ae.jsx)("div",{className:"user_edit_header mb-4",children:Object(ae.jsx)("h4",{className:"app_text_14_semibold mb-0",children:"report subject information"})})}),Object(ae.jsx)("div",{className:"col-lg-12",children:Object(ae.jsx)("div",{className:"form-group mb-4",children:Object(ae.jsxs)(q.a,{fullWidth:!0,children:[Object(ae.jsx)(J.a,{id:"demo-simple-select-label",children:"report type"}),Object(ae.jsxs)(W.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"report type",defaultValue:ve,onChange:function(e){return fe(e.target.value)},children:[Object(ae.jsx)(m.a,{value:"1",children:" comman "}),Object(ae.jsx)(m.a,{value:"2",children:" user "}),Object(ae.jsx)(m.a,{value:"3",children:" business "}),Object(ae.jsx)(m.a,{value:"4",children:" group "}),Object(ae.jsx)(m.a,{value:"5",children:" feed "}),Object(ae.jsx)(m.a,{value:"6",children:" event "})]})]})})}),Object(ae.jsx)("div",{className:"col-lg-12",children:Object(ae.jsx)("div",{className:"form-group mb-4",children:Object(ae.jsx)(A.a,Object(r.a)(Object(r.a)({label:"subject",autoComplete:"off",fullWidth:!0,variant:"outlined"},pt("subject")),{},{error:Boolean(ut.subject&&lt.subject),helperText:ut.subject&&lt.subject}))})})]}),Object(ae.jsx)("div",{className:"col",children:Object(ae.jsx)("div",{className:"col-md-8 m-auto",children:Object(ae.jsx)(F.a,{type:"submit",fullWidth:!0,variant:"contained",className:"my-3 text-lowercase text-white app_bg_primary app_text_16_semibold app_btn_lg",children:"submit"})})})]})})}),Object(ae.jsx)("div",{className:"modal_card_footer"})]})})]})})}},914:function(e,t,a){"use strict";a(1);var r=a(0);t.a=function(){return Object(r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(r.jsx)("path",{d:"M5.625 2.875H5.5C5.56875 2.875 5.625 2.81875 5.625 2.75V2.875H10.375V2.75C10.375 2.81875 10.4312 2.875 10.5 2.875H10.375V4H11.5V2.75C11.5 2.19844 11.0516 1.75 10.5 1.75H5.5C4.94844 1.75 4.5 2.19844 4.5 2.75V4H5.625V2.875ZM13.5 4H2.5C2.22344 4 2 4.22344 2 4.5V5C2 5.06875 2.05625 5.125 2.125 5.125H3.06875L3.45469 13.2969C3.47969 13.8297 3.92031 14.25 4.45312 14.25H11.5469C12.0813 14.25 12.5203 13.8313 12.5453 13.2969L12.9312 5.125H13.875C13.9438 5.125 14 5.06875 14 5V4.5C14 4.22344 13.7766 4 13.5 4Z",fill:"#d40f0f"}),Object(r.jsx)("path",{d:"M11.4266 13.125H4.57344L4.19531 5.125H11.8047L11.4266 13.125Z",fill:"white"})]})}},915:function(e,t,a){"use strict";var r=a(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(a(37)),n=a(0),s=(0,c.default)((0,n.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutlineOutlined");t.default=s}}]);
//# sourceMappingURL=28.d9094c00.chunk.js.map