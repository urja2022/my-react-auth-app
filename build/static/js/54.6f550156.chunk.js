(this["webpackJsonpbeemz-web"]=this["webpackJsonpbeemz-web"]||[]).push([[54],{1040:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Q}));var n=a(12),i=a.n(n),s=a(9),r=a(21),c=a(5),o=a(1),l=a(741),u=a(743),d=a(744),b=a(507),j=a(862),h=a(863),v=a(864),m=a(865),O=a(742),g=a(884),p=a(7),f=a(135),x=a.n(f),w=a(33),k=a(23),y=a(89),_=a(46),S=a(852),N=a(298),I=a(69),D=a(53),C=a(34),R=a(52),z=a(35),q=a.n(z),A=a(25),F=a(32),P=a(31),E=a(870),H=a(500),L=a(501),U=a(899),M=a(754),V=a(61),Y=a(90),B=a(91),J=a.n(B),T=a(0);a(65);function Q(){var e,t=Object(o.useState)(0),a=Object(c.a)(t,2),n=a[0],f=a[1],z=Object(o.useState)(10),B=Object(c.a)(z,2),Q=B[0],W=B[1],G=Object(o.useState)("asc"),K=Object(c.a)(G,2),X=K[0],Z=K[1],$=Object(o.useState)("name"),ee=Object(c.a)($,2),te=ee[0],ae=ee[1],ne=Object(o.useState)(""),ie=Object(c.a)(ne,2),se=ie[0],re=ie[1],ce=Object(o.useState)([]),oe=Object(c.a)(ce,2),le=oe[0],ue=oe[1],de=Object(_.a)(),be=Object(o.useState)(!0),je=Object(c.a)(be,2),he=je[0],ve=je[1],me=Object(D.b)().enqueueSnackbar,Oe=Object(C.c)((function(e){return e.permissions})),ge=Object(V.a)(),pe=Object(E.a)(ge.breakpoints.down("md")),fe=Object(A.g)(),xe=Object(o.useState)(!1),we=Object(c.a)(xe,2),ke=we[0],ye=we[1],_e=Object(o.useState)(!1),Se=Object(c.a)(_e,2),Ne=Se[0],Ie=Se[1],De=Object(o.useState)([]),Ce=Object(c.a)(De,2),Re=Ce[0],ze=Ce[1],qe=Object(o.useState)(!1),Ae=Object(c.a)(qe,2),Fe=Ae[0],Pe=Ae[1],Ee=Object(p.a)(l.a)((function(e){e.theme;return{"&:nth-of-type(odd)":{backgroundColor:"#ffffff"},"&:nth-of-type(even)":{background:"linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), #F4F5F7"},"& td, & th":{border:0}}}));Object(o.useEffect)((function(){var e=[];le.map((function(t){var a=new Date(null===t||void 0===t?void 0:t.createdAt).toLocaleString(),n={name:(null===t||void 0===t?void 0:t.businessId)?null===t||void 0===t?void 0:t.businessName:null===t||void 0===t?void 0:t.userName,email:(null===t||void 0===t?void 0:t.businessId)?null===t||void 0===t?void 0:t.businessEmail:null===t||void 0===t?void 0:t.userEmail,mobile:(null===t||void 0===t?void 0:t.mobile)?null===t||void 0===t?void 0:t.mobile:"-",reason:(null===t||void 0===t?void 0:t.reason)?null===t||void 0===t?void 0:t.reason:"-",status:(null===t||void 0===t?void 0:t.businessId)?"Business":" User",createdAt:null!==a&&void 0!==a?a:"-"};e.push(n)})),ze(e)}),[le]);var He={data:Re,headers:[{label:"name",key:"name"},{label:"email",key:"email"},{label:"mobile",key:"mobile"},{label:"reason",key:"reason"},{label:"status",key:"status"},{label:"createdAt",key:"createdAt"}],filename:"beemz-user-delete-request.csv"};function Le(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function Ue(e,t){return Me.apply(this,arguments)}function Me(){return(Me=Object(r.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.get(k.n.getUserDeleteReqList,{params:{type:"1",page:t+1,search:a,limit:Q}});case 2:return n=e.sent,e.abrupt("return",n.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ve=Object(w.useQuery)(["userDeleteReqList",n,se],(function(){return Ue(n,se)}),{keepPreviousData:!0}),Ye=Ve.isLoading,Be=Ve.data,Je=Ve.refetch;Object(o.useEffect)((function(){Be&&(ue(null===Be||void 0===Be?void 0:Be.data),W(0!=(null===Be||void 0===Be?void 0:Be.metadata.length)?null===Be||void 0===Be?void 0:Be.metadata[0].limit:10)),0!=(null===Be||void 0===Be?void 0:Be.metadata.length)&&1==(null===Be||void 0===Be?void 0:Be.metadata[0].hasMoreData)&&Ue(n+1),setTimeout((function(){ve(!1)}),1800)}),[Be]);var Te=function(){ye(!1)},Qe=function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(le,function(e,t){return"desc"===e?function(e,a){return Le(e,a,t)}:function(e,a){return-Le(e,a,t)}}(X,te));function We(){return(We=Object(r.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe(!0),0!=Ne.status||Ne.businessId){e.next=8;break}return e.next=4,de.delete(k.n.deleteUser+Ne.userId);case 4:200==(t=e.sent).status?(Pe(!1),me(t.data.message,{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3})):me("something went wrong",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),e.next=12;break;case 8:return e.next=10,de.delete(k.n.deleteUserBusiness+Ne.businessId);case 10:200==(a=e.sent).status?(Pe(!1),me(a.data.message,{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3})):me("something went wrong",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3});case 12:Je(),Te();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){return(Ge=Object(r.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.put(k.n.cancelRequest+t);case 2:200==(a=e.sent).status?me(a.data.message,{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}):me("something went wrong",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),Je(),Te();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Ye)return Object(T.jsx)(R.a,{});return Object(T.jsx)(T.Fragment,{children:he?Object(T.jsx)(R.a,{}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"dashboard_header mb-4",children:[Object(T.jsxs)(u.a,{className:"dashboard_searchbox col-lg-4",children:[Object(T.jsx)(d.a,{children:Object(T.jsx)(I.a,{})}),Object(T.jsx)(b.a,{fullWidth:!0,sx:{flex:1},placeholder:"search user name...",onChange:function(e){return re(e.target.value.trim()),void Ue(n,se)}})]}),Object(T.jsxs)(S.a,{direction:"row",className:"d-flex align-items-center",spacing:2,children:[Object(T.jsx)(P.a,{title:"refresh",placement:"bottom",children:Object(T.jsx)(N.a,{className:"dashboard_light_bg_icon_btn",children:Object(T.jsx)(x.a,{style:{fontSize:18,color:"#6200ee"}})})}),"1"==(null===Oe||void 0===Oe||null===(e=Oe.users)||void 0===e?void 0:e.substring(1,2))?Object(T.jsx)(P.a,{title:"export-users",placement:"bottom",children:Object(T.jsx)(N.a,{className:"dashboard_light_bg_icon_btn",children:Object(T.jsx)(Y.CSVLink,Object(s.a)(Object(s.a)({},He),{},{children:Object(T.jsx)(J.a,{style:{fontSize:18,color:"#6200ee"}})}))})}):""]})]}),Object(T.jsxs)(H.a,{fullScreen:pe,open:ke,onClose:Te,"aria-labelledby":"responsive-dialog-title",children:[Object(T.jsx)(L.a,{id:"responsive-dialog-title",className:"m-auto",children:"Are you sure you want to delete the user?"}),Object(T.jsx)(U.a,{}),Object(T.jsxs)(M.a,{className:"m-auto",children:[Object(T.jsx)(N.a,{className:"theme_button_view",variant:"contained",autoFocus:!0,onClick:Te,children:"Cancel"}),Object(T.jsx)(N.a,{className:"theme_button_view",variant:"contained",onClick:function(){return function(){return We.apply(this,arguments)}()},autoFocus:!0,disabled:Fe,children:"Delete"})]})]}),Object(T.jsxs)(j.a,{children:[Object(T.jsx)(h.a,{children:Object(T.jsxs)(v.a,{children:[Object(T.jsx)(y.a,{headLabel:[{id:"userName",label:"name",alignRight:!1},{id:"email",label:"email",alignRight:!1},{id:"mobile",label:"mobile",alignRight:!1},{id:"reason",label:"reason",alignRight:!1},{id:"status",label:"delete request",alignRight:!1},{id:"createdAt",label:"date",alignRight:!1},{id:"action",label:"action",alignRight:!1}],rowCount:0!==(null===Be||void 0===Be?void 0:Be.metadata.length)?null===Be||void 0===Be?void 0:Be.metadata[0].total:0,onRequestSort:function(e,t){Z(te===t&&"asc"===X?"desc":"asc"),ae(t)}}),le.length>0?Object(T.jsx)(m.a,{children:Qe.map((function(e,t){var a,n,i;return Object(T.jsxs)(Ee,{children:[Object(T.jsx)(O.a,{component:"th",scope:"row",children:(null===e||void 0===e?void 0:e.businessId)?e.businessName:null!==(a=e.userName)&&void 0!==a?a:"-"}),Object(T.jsx)(O.a,{component:"th",scope:"row",children:(null===e||void 0===e?void 0:e.businessId)?e.businessEmail:null!==(n=e.userEmail)&&void 0!==n?n:"-"}),Object(T.jsx)(O.a,{component:"th",scope:"row",children:(null===e||void 0===e?void 0:e.mobile)?e.mobile:"-"}),Object(T.jsx)(O.a,{component:"th",scope:"row",children:e.reason}),Object(T.jsx)(O.a,{component:"th",scope:"row",children:e.businessId?"business":"user"}),Object(T.jsxs)(O.a,{align:"left",children:[" ",q()(e.createdAt).format("MMM DD YYYY h:mm A")]}),Object(T.jsx)(O.a,{children:Object(T.jsx)(S.a,{direction:"row",spacing:3,children:"1"==(null===Oe||void 0===Oe||null===(i=Oe.business_request)||void 0===i?void 0:i.substring(3,4))?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(P.a,{title:"delete user & business",placement:"bottom",children:Object(T.jsx)(N.a,{className:"theme_button",variant:"contained",onClick:function(t){return Ie(e),void ye(!0)},children:"delete"})}),Object(T.jsx)(P.a,{title:"cancel request",placement:"bottom",children:Object(T.jsx)(N.a,{className:"invalid_button",variant:"contained",onClick:function(t){return function(e){return Ge.apply(this,arguments)}(e._id)},children:"cancel"})}),Object(T.jsx)(P.a,{title:"view user",placement:"bottom",children:Object(T.jsx)(N.a,{className:"invalid_button",variant:"contained",onClick:function(){var t;(t=e).businessId?fe(F.c.general.deleteBusinessReqView,{state:{businessId:null===t||void 0===t?void 0:t.businessId}}):fe(F.c.general.ArchiveUserView,{state:{userId:null===t||void 0===t?void 0:t.userId}})},children:"View"})})]}):""})})]},t)}))}):Object(T.jsx)(m.a,{children:Object(T.jsx)(l.a,{children:Object(T.jsx)(O.a,{align:"center",colSpan:6,sx:{py:5},children:Object(T.jsx)("span",{className:"app_text_16_semibold",children:"no data found"})})})})]})}),Object(T.jsx)(g.a,{component:"div",rowsPerPageOptions:[10,20,50,100],count:0!=(null===Be||void 0===Be?void 0:Be.metadata.length)?null===Be||void 0===Be?void 0:Be.metadata[0].total:0,rowsPerPage:Q,page:n,onPageChange:function(e,t){f(t)},onRowsPerPageChange:function(e){W(parseInt(e.target.value,10)),f(0),setTimeout((function(){Je()}),500)}})]})]})})}}}]);
//# sourceMappingURL=54.6f550156.chunk.js.map