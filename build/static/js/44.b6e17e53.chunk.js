(this["webpackJsonpbeemz-web"]=this["webpackJsonpbeemz-web"]||[]).push([[44],{1021:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return $}));var n=a(9),c=a(12),s=a.n(c),i=a(21),r=a(5),o=a(1),l=a(741),d=a(743),u=a(744),b=a(507),j=a(875),h=a(910),p=a(862),m=a(863),v=a(864),O=a(865),f=a(742),x=a(884),g=a(745),_=a(7),w=a(135),N=a.n(w),y=a(33),S=a(23),A=a(89),k=a(46),R=a(852),C=a(69),F=a(53),D=a(34),P=a(52),z=a(35),q=a.n(z),I=a(25),E=a(32),L=a(31),V=a(893),M=a(298),B=a(891),H=a(748),W=a(902),Y=a(59),J=a(19),T=a(95),Q=a.n(T),G=a(439),K=a(90),U=a(91),X=a.n(U),Z=a(0);a(65);function $(){var e,t=Object(o.useState)(0),a=Object(r.a)(t,2),c=a[0],w=a[1],z=Object(o.useState)(10),T=Object(r.a)(z,2),U=T[0],$=T[1],ee=Object(o.useState)("asc"),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],ce=Object(o.useState)("name"),se=Object(r.a)(ce,2),ie=se[0],re=se[1],oe=Object(o.useState)(""),le=Object(r.a)(oe,2),de=le[0],ue=le[1],be=Object(o.useState)([]),je=Object(r.a)(be,2),he=je[0],pe=je[1],me=Object(k.a)(),ve=Object(o.useState)(!0),Oe=Object(r.a)(ve,2),fe=Oe[0],xe=Oe[1],ge=Object(o.useState)(3),_e=Object(r.a)(ge,2),we=_e[0],Ne=_e[1],ye=Object(o.useState)(""),Se=Object(r.a)(ye,2),Ae=Se[0],ke=Se[1],Re=Object(o.useState)(),Ce=Object(r.a)(Re,2),Fe=Ce[0],De=Ce[1],Pe=Object(F.b)().enqueueSnackbar,ze=Object(D.c)((function(e){return e.permissions})),qe=Object(I.g)(),Ie=Object(o.useState)(!1),Ee=Object(r.a)(Ie,2),Le=Ee[0],Ve=Ee[1],Me=Object(o.useState)([]),Be=Object(r.a)(Me,2),He=Be[0],We=Be[1],Ye=Object(_.a)(l.a)((function(e){e.theme;return{"&:nth-of-type(odd)":{backgroundColor:"#ffffff"},"&:nth-of-type(even)":{background:"linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), #F4F5F7"},"& td, & th":{border:0}}}));Object(o.useEffect)((function(){var e=[];he.map((function(t){var a=new Date(null===t||void 0===t?void 0:t.createdAt).toLocaleString(),n={name:(null===t||void 0===t?void 0:t.name)?null===t||void 0===t?void 0:t.name:"-",userId:(null===t||void 0===t?void 0:t.userName)?null===t||void 0===t?void 0:t.userName:"-",isApprove:1==(null===t||void 0===t?void 0:t.isApprove)?"Accepted":2==(null===t||void 0===t?void 0:t.isApprove)?"Rejected":"Pending",createdAt:a||"-"};e.push(n)})),We(e)}),[he]);var Je={data:He,headers:[{label:"name",key:"name"},{label:"userId",key:"userId"},{label:"isApprove",key:"isApprove"},{label:"createdAt",key:"createdAt"}],filename:"beemz-buisnesses.csv"};function Te(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function Qe(e,t,a){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(i.a)(s.a.mark((function e(t,a,n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.get(S.b.getBusinessList,{params:{type:3!=n&&n,page:t+1,search:a,limit:U}});case 2:return c=e.sent,e.abrupt("return",c.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ke=Object(y.useQuery)(["businessList",c,de,we],(function(){return Qe(c,de,we)}),{keepPreviousData:!0}),Ue=Ke.isLoading,Xe=Ke.data,Ze=Ke.refetch;Object(o.useEffect)((function(){Xe&&(pe(null===Xe||void 0===Xe?void 0:Xe.data),$(0!=(null===Xe||void 0===Xe?void 0:Xe.metadata.length)?null===Xe||void 0===Xe?void 0:Xe.metadata[0].limit:10)),0!=(null===Xe||void 0===Xe?void 0:Xe.metadata.length)&&1==(null===Xe||void 0===Xe?void 0:Xe.metadata[0].hasMoreData)&&Qe(c+1),setTimeout((function(){xe(!1)}),1800)}),[Xe]);!function(e,t){var a=e.map((function(e,t){return[e,t]}));a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(he,function(e,t){return"desc"===e?function(e,a){return Te(e,a,t)}:function(e,a){return-Te(e,a,t)}}(ae,ie));function $e(){return($e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.put(S.b.businessApprove+a,{isApprove:t});case 2:200==e.sent.status?Pe("business accepted successfully",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}):Pe("something went wrong",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),Ze();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var et=J.d().shape({rejectReason:J.e().min(2,"reason can set of between 2 and 255 characters!").max(255,"reason can set of between 2 and 255 characters!").required("reason is required")}),tt=Object(Y.e)({initialValues:{rejectReason:""},validationSchema:et,onSubmit:function(){var e=Object(i.a)(s.a.mark((function e(t,a){var n,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.resetForm,a.setFieldError,c=a.setSubmitting,i={rejectReason:t.rejectReason,isApprove:2},at(i),n(),c(!1),Ze();case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}),at=Object(y.useMutation)(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.put(S.b.businessApprove+Ae,JSON.stringify(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){e.data;Ze(),Pe("business rejected successfully",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),rt()},onError:function(e){var t,a,n,c,s=e.response.data.errors;(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)?Pe(null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}):Object.keys(s).forEach((function(e){ut("rejectReason"===e?"rejectReason":e,s[e])}))}}).mutateAsync,nt=Object(o.useState)(!1),ct=Object(r.a)(nt,2),st=ct[0],it=ct[1],rt=function(){it(!1)},ot=tt.errors,lt=tt.touched,dt=(tt.setFieldValue,tt.handleSubmit),ut=tt.setFieldError,bt=tt.getFieldProps;if(Ue)return Object(Z.jsx)(P.a,{});return Object(Z.jsx)(Z.Fragment,{children:fe?Object(Z.jsx)(P.a,{}):Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsxs)("div",{className:"dashboard_header mb-4",children:[Object(Z.jsxs)(d.a,{className:"dashboard_searchbox col-lg-4",children:[Object(Z.jsx)(u.a,{children:Object(Z.jsx)(C.a,{})}),Object(Z.jsx)(b.a,{fullWidth:!0,sx:{flex:1},placeholder:"search business name...",onChange:function(e){return ue(e.target.value.trim()),void Qe(c,de,we)}})]}),Object(Z.jsx)("div",{className:"form-group w-25",children:Object(Z.jsx)(V.a,{fullWidth:!0,children:Object(Z.jsxs)(j.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"filter",defaultValue:we,onChange:function(e){return t=e.target.value,Ne(t),void Ze();var t},children:[Object(Z.jsx)(h.a,{value:"3",children:"  all "}),Object(Z.jsx)(h.a,{value:"1",children:"  accept "}),Object(Z.jsx)(h.a,{value:"2",children:"  reject "}),Object(Z.jsx)(h.a,{value:"0",children:"  pending "})]})})}),Object(Z.jsxs)(R.a,{direction:"row",className:"d-flex align-items-center",spacing:2,children:[Object(Z.jsx)(L.a,{title:"refresh",placement:"bottom",children:Object(Z.jsx)(M.a,{className:"dashboard_light_bg_icon_btn",children:Object(Z.jsx)(N.a,{style:{fontSize:18,color:"#6200ee"}})})}),"1"==(null===ze||void 0===ze||null===(e=ze.business_request)||void 0===e?void 0:e.substring(1,2))?Object(Z.jsx)(L.a,{title:"export Business",placement:"bottom",children:Object(Z.jsx)(M.a,{className:"dashboard_light_bg_icon_btn",children:Object(Z.jsx)(K.CSVLink,Object(n.a)(Object(n.a)({},Je),{},{children:Object(Z.jsx)(X.a,{style:{fontSize:18,color:"#6200ee"}})}))})}):""]})]}),Object(Z.jsxs)(p.a,{children:[Object(Z.jsx)(m.a,{children:Object(Z.jsxs)(v.a,{children:[Object(Z.jsx)(A.a,{headLabel:[{id:"name",label:"name",alignRight:!1},{id:"userId",label:"name of user",alignRight:!1},{id:"isApprove",label:"status",alignRight:!1},{id:"createdAt",label:"date",alignRight:!1},{id:"action",label:"action",alignRight:!1}],rowCount:0!==(null===Xe||void 0===Xe?void 0:Xe.metadata.length)?null===Xe||void 0===Xe?void 0:Xe.metadata[0].total:0,onRequestSort:function(e,t){ne(ie===t&&"asc"===ae?"desc":"asc"),re(t)}}),he.length>0?Object(Z.jsx)(O.a,{children:he.map((function(e,t){var a,n,c;return Object(Z.jsxs)(Ye,{children:[Object(Z.jsx)(f.a,{component:"th",scope:"row",children:null!==(a=e.name)&&void 0!==a?a:"-"}),Object(Z.jsx)(f.a,{component:"th",scope:"row",children:null!==(n=e.userName)&&void 0!==n?n:"-"}),Object(Z.jsx)(f.a,{component:"th",scope:"row",children:1===e.isApprove?Object(Z.jsx)(B.a,{label:"accepted",className:"app_status_chip accepted"}):2===e.isApprove?Object(Z.jsx)(B.a,{label:"rejected",className:"app_status_chip invalid"}):Object(Z.jsx)(B.a,{label:"pending",className:"app_status_chip pending"})}),Object(Z.jsxs)(f.a,{align:"left",children:[" ",q()(e.createdAt).format("MMM DD YYYY h:mm A")]}),Object(Z.jsx)(f.a,{children:Object(Z.jsxs)(R.a,{direction:"row",spacing:3,children:[Object(Z.jsx)(L.a,{title:"view business details",placement:"bottom",children:Object(Z.jsx)(M.a,{className:"theme_button_view",variant:"contained",onClick:function(t){return a=e,void qe(E.c.general.businessView,{state:{businessData:a}});var a},children:"view"})}),Object(Z.jsx)(L.a,{title:"employee list",placement:"bottom",children:Object(Z.jsx)(M.a,{className:"theme_button_view",variant:"contained",onClick:function(){return t=null===e||void 0===e?void 0:e.id,Ve(!0),void De(t);var t},children:"employee"})}),"1"==(null===ze||void 0===ze||null===(c=ze.business_request)||void 0===c?void 0:c.substring(3,4))&&0===e.isApprove?Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(L.a,{title:"accept business request",placement:"bottom",children:Object(Z.jsx)(M.a,{className:"theme_button",variant:"contained",onClick:function(t){return function(e,t){return $e.apply(this,arguments)}(1,e.id)},children:"accept"})}),Object(Z.jsx)(L.a,{title:"reject business request",placement:"bottom",children:Object(Z.jsx)(M.a,{className:"invalid_button",variant:"contained",onClick:function(){return function(e){ke(e.id),it(!0)}(e)},children:"reject"})})]}):""]})})]},t)}))}):Object(Z.jsx)(O.a,{children:Object(Z.jsx)(l.a,{children:Object(Z.jsx)(f.a,{align:"center",colSpan:5,sx:{py:5},children:Object(Z.jsx)("span",{className:"app_text_16_semibold",children:"no data found"})})})})]})}),Object(Z.jsx)(x.a,{component:"div",rowsPerPageOptions:[10,20,50,100],count:0!=(null===Xe||void 0===Xe?void 0:Xe.metadata.length)?null===Xe||void 0===Xe?void 0:Xe.metadata[0].total:0,rowsPerPage:U,page:c,onPageChange:function(e,t){w(t)},onRowsPerPageChange:function(e){$(parseInt(e.target.value,10)),w(0),setTimeout((function(){Ze()}),500)}})]}),Object(Z.jsx)(H.a,{open:st,onClose:rt,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:Object(Z.jsxs)(g.a,{className:"modal_card modal_lg db_trust_level_modal_box",children:[Object(Z.jsxs)("div",{className:"modal_card_header",children:[Object(Z.jsx)("div",{className:"left_part",children:Object(Z.jsx)("h4",{children:"rejected reason "})}),Object(Z.jsx)("div",{className:"right_part",children:Object(Z.jsx)(M.a,{className:"dashboard_light_bg_icon_btn",onClick:rt,"aria-label":"delete",children:Object(Z.jsx)(Q.a,{})})})]}),Object(Z.jsx)("div",{className:"modal_card_body",children:Object(Z.jsx)(Y.d,{value:tt,children:Object(Z.jsxs)(Y.c,{autoComplete:"off",noValidate:!0,onSubmit:dt,children:[Object(Z.jsxs)("div",{className:"row",children:[Object(Z.jsx)("div",{className:"col-12",children:Object(Z.jsx)("div",{className:"user_edit_header mb-4",children:Object(Z.jsx)("h4",{className:"app_text_14_semibold mb-0",children:"rejected reason information"})})}),Object(Z.jsx)("div",{className:"col-lg-12",children:Object(Z.jsx)("div",{className:"form-group mb-4",children:Object(Z.jsx)(W.a,Object(n.a)(Object(n.a)({label:"reason",autoComplete:"off",fullWidth:!0,variant:"outlined"},bt("rejectReason")),{},{error:Boolean(lt.rejectReason&&ot.rejectReason),helperText:lt.rejectReason&&ot.rejectReason}))})})]}),Object(Z.jsx)("div",{className:"col",children:Object(Z.jsx)("div",{className:"col-md-8 m-auto",children:Object(Z.jsx)(M.a,{type:"submit",fullWidth:!0,variant:"contained",className:"my-3 text-lowercase text-white app_bg_primary app_text_16_semibold app_btn_lg",children:"submit"})})})]})})}),Object(Z.jsx)("div",{className:"modal_card_footer"})]})}),Object(Z.jsx)(G.a,{newBusinessId:Fe,open:Le,onClose:function(e){Ve(!1),De(!1)}})]})})}}}]);
//# sourceMappingURL=44.b6e17e53.chunk.js.map