{"version":3,"sources":["pages/dashboard/Notification.jsx"],"names":["Notification","enqueueSnackbar","useSnackbar","axiosPrivate","useAxiosPrivate","notifyAllUser","useMutation","data","post","USER_API_URL","sendBulkNotification","JSON","stringify","onSuccess","variant","anchorOrigin","vertical","horizontal","autoHideDuration","onError","error","errorData","response","errors","Object","keys","forEach","key","message","mutateAsync","completedSchema","Yup","shape","title","required","description","formik","useFormik","initialValues","validationSchema","onSubmit","values","resetForm","setFieldError","setSubmitting","touched","handleSubmit","setFieldValue","getFieldProps","className","value","autoComplete","noValidate","label","fullWidth","Boolean","helperText","type"],"mappings":"4OAoIeA,UA3HM,WACjB,IAAQC,EAAoBC,cAApBD,gBACFE,EAAeC,cAGAC,EAAkBC,sBAAW,uCAC9C,WAAOC,GAAI,iFACMJ,EAAaK,KAAKC,IAAaC,qBAAsBC,KAAKC,UAAUL,IAAM,mFAC1F,mDAH6C,GAI9C,CACIM,UAAW,YAAO,EAAJN,KACVN,EAAgB,iCAAkC,CAC9Ca,QAAS,UACTC,aAAc,CAAEC,SAAU,MAAOC,WAAY,SAC7CC,iBAAkB,OAG1BC,QAAS,SAACC,GACN,IASO,IATDC,EAAYD,EAAME,SAASf,KAAKgB,OAClCF,EACAG,OAAOC,KAAKJ,GAAWK,SAAQ,SAACC,GAC5B1B,EAAgBoB,EAAUM,GAAM,CAC5Bb,QAAS,QACTC,aAAc,CAAEC,SAAU,MAAOC,WAAY,SAC7CC,iBAAkB,SAI1BjB,EAA8B,QAAf,EAACmB,EAAME,gBAAQ,OAAM,QAAN,EAAd,EAAgBf,YAAI,WAAN,EAAd,EAAsBqB,QAAS,CAC3Cd,QAAS,QACTC,aAAc,CAAEC,SAAU,MAAOC,WAAY,SAC7CC,iBAAkB,SA1B9BW,YAiCFC,EAAkBC,MAAaC,MAAM,CAEvCC,MAAOF,MACFG,SAAS,qBACdC,YAAaJ,MACRG,SAAS,6BAGZE,EAASC,YAAU,CACrBC,cAAe,CACXL,MAAO,GACPE,YAAa,IAEjBI,iBAAkBT,EAClBU,SAAS,WAAD,4BAAE,WAAOC,EAAO,GAAD,yEAIlB,OAJsBC,EAAS,EAATA,UAAwB,EAAbC,cAAeC,EAAa,EAAbA,cACpC,CACTX,MAAOQ,EAAOR,MACdE,YAAaM,EAAON,aACvB,SACK9B,EAAcoC,GAAQ,KAAD,EAC3BC,IACAE,GAAc,GAAO,2CAGxB,qDAVQ,KAcLrB,EAA+Ea,EAA/Eb,OAAQsB,EAAuET,EAAvES,QAAwBC,GAA+CV,EAA9DW,cAA8DX,EAA/CU,cAA6BE,GAAkBZ,EAAjCO,cAAiCP,EAAlBY,eACrE,OACI,gCAAK,MAAG,qBAAKC,UAAU,kBAAiB,SACpC,cAAC,IAAc,CAACC,MAAOd,EAAO,SAC1B,eAAC,IAAI,CAACe,aAAa,MAAMC,YAAU,EAACZ,SAAUM,EAAa,UACvD,sBAAKG,UAAU,MAAK,UAChB,qBAAKA,UAAU,SAAQ,SACnB,qBAAKA,UAAU,wBAAuB,SAClC,oBAAIA,UAAU,4BAA2B,SAAC,0BAIlD,sBAAKA,UAAU,YAAW,UACtB,qBAAKA,UAAU,kBAAiB,SAC5B,cAAC,IAAS,yBACNI,MAAM,QACNF,aAAa,MACbG,WAAS,EACTxC,QAAQ,YACJkC,EAAc,UAAQ,IAC1B5B,MAAOmC,QAAQV,EAAQZ,OAASV,EAAOU,OACvCuB,WAAYX,EAAQZ,OAASV,EAAOU,WAG5C,qBAAKgB,UAAU,kBAAiB,SAC5B,cAAC,IAAS,yBACNI,MAAM,cACNF,aAAa,MACbG,WAAS,EACTxC,QAAQ,YACJkC,EAAc,gBAAc,IAChC5B,MAAOmC,QAAQV,EAAQV,aAAeZ,EAAOY,aAC7CqB,WAAYX,EAAQV,aAAeZ,EAAOY,uBAO1D,qBAAKc,UAAU,MAAK,SAChB,qBAAKA,UAAU,YAAW,SACtB,cAAC,IAAM,CACHQ,KAAK,SACLH,WAAS,EACTxC,QAAQ,YACRmC,UAAU,gFAA+E,SAC5F","file":"static/js/50.d1eb1af3.chunk.js","sourcesContent":["import { Button, TextField } from '@material-ui/core'\r\nimport { Form, FormikProvider, useFormik } from 'formik'\r\nimport * as Yup from \"yup\";\r\nimport React from 'react'\r\nimport { useMutation } from 'react-query';\r\nimport useAxiosPrivate from 'src/hooks/useAxiosPrivate';\r\nimport { useSnackbar } from 'notistack';\r\nimport { USER_API_URL } from 'src/api/axios';\r\n\r\nconst Notification = () => {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const axiosPrivate = useAxiosPrivate();\r\n\r\n    // send notificatoion \r\n    const { mutateAsync: notifyAllUser } = useMutation(\r\n        async (data) => {\r\n            return await axiosPrivate.post(USER_API_URL.sendBulkNotification, JSON.stringify(data))\r\n        },\r\n        {\r\n            onSuccess: ({ data }) => {\r\n                enqueueSnackbar(\"Notofocation send successfully\", {\r\n                    variant: \"success\",\r\n                    anchorOrigin: { vertical: \"top\", horizontal: \"right\" },\r\n                    autoHideDuration: 2000,\r\n                });\r\n            },\r\n            onError: (error) => {\r\n                const errorData = error.response.data.errors;\r\n                if (errorData) {\r\n                    Object.keys(errorData).forEach((key) => {\r\n                        enqueueSnackbar(errorData[key], {\r\n                            variant: \"error\",\r\n                            anchorOrigin: { vertical: \"top\", horizontal: \"right\" },\r\n                            autoHideDuration: 2000,\r\n                        });\r\n                    });\r\n                } else {\r\n                    enqueueSnackbar(error.response?.data?.message, {\r\n                        variant: \"error\",\r\n                        anchorOrigin: { vertical: \"top\", horizontal: \"right\" },\r\n                        autoHideDuration: 2000,\r\n                    });\r\n                }\r\n            },\r\n        }\r\n    );\r\n\r\n    const completedSchema = Yup.object().shape({\r\n\r\n        title: Yup.string()\r\n            .required(\"title is required\"),\r\n        description: Yup.string()\r\n            .required(\"description is required\"),\r\n\r\n    });\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            title: \"\",\r\n            description: \"\"\r\n        },\r\n        validationSchema: completedSchema,\r\n        onSubmit: async (values, { resetForm, setFieldError, setSubmitting }) => {\r\n            const data = {\r\n                title: values.title,\r\n                description: values.description,\r\n            }\r\n            await notifyAllUser(values);\r\n            resetForm();\r\n            setSubmitting(false);\r\n\r\n\r\n        },\r\n    });\r\n\r\n\r\n    const { errors, touched, setFieldValue, handleSubmit, setFieldError, getFieldProps } = formik;\r\n    return (\r\n        <div>   <div className=\"modal_card_body\">\r\n            <FormikProvider value={formik}>\r\n                <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit}>\r\n                    <div className=\"row\">\r\n                        <div className='col-12'>\r\n                            <div className='user_edit_header mb-4'>\r\n                                <h4 className=\"app_text_14_semibold mb-0\">send notification</h4>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-lg-12\">\r\n                            <div className=\"form-group mb-4\">\r\n                                <TextField\r\n                                    label='title'\r\n                                    autoComplete='off'\r\n                                    fullWidth\r\n                                    variant='outlined'\r\n                                    {...getFieldProps(\"title\")}\r\n                                    error={Boolean(touched.title && errors.title)}\r\n                                    helperText={touched.title && errors.title}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group mb-4\">\r\n                                <TextField\r\n                                    label='description'\r\n                                    autoComplete='off'\r\n                                    fullWidth\r\n                                    variant='outlined'\r\n                                    {...getFieldProps(\"description\")}\r\n                                    error={Boolean(touched.description && errors.description)}\r\n                                    helperText={touched.description && errors.description}\r\n                                />\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <div className=\"col-md-6 \">\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                className=\"my-3 text-lowercase text-white app_bg_primary app_text_16_semibold app_btn_lg\"\r\n                            >\r\n                                submit\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </Form>\r\n            </FormikProvider>\r\n        </div></div>\r\n    )\r\n}\r\n\r\nexport default Notification"],"sourceRoot":""}