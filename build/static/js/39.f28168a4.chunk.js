(this["webpackJsonpbeemz-web"]=this["webpackJsonpbeemz-web"]||[]).push([[39],{1020:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Q}));var n=a(9),r=a(12),c=a.n(r),s=a(21),i=a(5),l=a(1),o=a(741),u=a(743),d=a(744),b=a(862),j=a(863),h=a(864),m=a(865),O=a(742),f=a(745),g=a(869),x=a(7),p=a(915),v=a.n(p),_=a(135),y=a.n(_),S=a(33),k=a(23),w=a(89),N=a(46),q=a(356),C=a(852),R=a(68),F=a(298),z=a(748),A=a(902),E=a(25),M=a(69),D=a(59),L=a(19),J=a(53),P=a(95),V=a.n(P),Y=a(35),H=a.n(Y),W=a(52),T=a(34),U=a(31),B=a(0);a(65);function Q(){var e,t,a,r=Object(l.useState)([]),p=Object(i.a)(r,2),_=p[0],P=p[1],Y=Object(l.useState)(0),Q=Object(i.a)(Y,2),G=Q[0],I=(Q[1],Object(l.useState)("")),K=Object(i.a)(I,2),X=K[0],Z=K[1],$=Object(l.useState)(5),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ne=Object(l.useState)("asc"),re=Object(i.a)(ne,2),ce=re[0],se=re[1],ie=Object(l.useState)("name"),le=Object(i.a)(ie,2),oe=le[0],ue=le[1],de=Object(l.useState)(["users","category","chat_category","sub_admin","roles","trust_level","trace_request","trace_history","configurable_fields","business_request","group_chat_admin","employee_request","employee_history","event","posts"]),be=Object(i.a)(de,2),je=be[0],he=be[1],me=Object(l.useState)(""),Oe=Object(i.a)(me,2),fe=Oe[0],ge=Oe[1],xe=Object(N.a)(),pe=(Object(E.g)(),Object(J.b)().enqueueSnackbar),ve=Object(l.useState)(""),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],ke=Object(l.useState)({}),we=Object(i.a)(ke,2),Ne=we[0],qe=we[1],Ce=Object(T.c)((function(e){return e.permissions})),Re=Object(l.useState)(!0),Fe=Object(i.a)(Re,2),ze=Fe[0],Ae=Fe[1],Ee=Object(x.a)(o.a)((function(e){e.theme;return{"&:nth-of-type(odd)":{backgroundColor:"#ffffff"},"&:nth-of-type(even)":{background:"linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), #F4F5F7"},"& td, & th":{border:0}}}));function Me(){return(Me=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.get(k.k.getRoleList);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var De=Object(S.useQuery)(["roleData"],(function(){return function(){return Me.apply(this,arguments)}()}),{keepPreviousData:!0}),Le=De.isLoading,Je=De.data,Pe=De.refetch;Object(l.useEffect)((function(){Je&&(P(Je.data?[]:Je),ae(10)),setTimeout((function(){Ae(!1)}),1800)}),[Je]);var Ve=function(e,t){se(oe===t&&"asc"===ce?"desc":"asc"),ue(t)},Ye=G>0?Math.max(0,(1+G)*te-(null===Je||void 0===Je||null===(e=Je.data)||void 0===e?void 0:e.length)):0,He=0===(null===_||void 0===_?void 0:_.length),We=L.d().shape({name:L.e().min(2,"name can set of between 2 and 50 characters!").max(50,"name can set of between 2 and 50 characters!").required("role name is required")}),Te=Object(D.e)({initialValues:{name:"",admin_email:""},validationSchema:We,onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(t,a){var n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.resetForm,a.setFieldError,r=a.setSubmitting,s={name:t.name,users:Ne.users,category:Ne.category,sub_admin:Ne.sub_admin,roles:Ne.roles,trust_level:Ne.trust_level,trace_request:Ne.trace_request,trace_history:Ne.trace_history,configurable_fields:Ne.configurable_fields,business_request:Ne.business_request},""!=ye){e.next=7;break}return e.next=5,Be(s);case 5:e.next=9;break;case 7:return e.next=9,Ue(s);case 9:n(),r(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}),Ue=Object(S.useMutation)(function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.put(k.k.updateRole+ye,JSON.stringify(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){e.data;Pe(),pe("Role Update successfully ",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),Ze()},onError:function(e){var t=e.response.data.errors;Object.keys(t).forEach((function(e){nt("name"===e?"name":e,t[e])}))}}).mutateAsync,Be=Object(S.useMutation)(function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe.post(k.k.addRole,JSON.stringify(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){e.data;Pe(),pe("Role add successfully ",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),Ze()},onError:function(e){var t=e.response.data.errors;Object.keys(t).forEach((function(e){nt("name"===e?"name":e,t[e])}))}}).mutateAsync;var Qe=function(e,t,a){Ne[a]=function(e,t,a){return t>e.length-1?e:e.substring(0,t)+a+e.substring(t+1)}(Ne[a],t,e.target.checked?"1":"0"),he(["users","category","chat_category","sub_admin","roles","trust_level","trace_request","trace_history","configurable_fields","business_request","group_chat_admin","employee_request","employee_history","event","posts"])},Ge=Object(l.useState)(!1),Ie=Object(i.a)(Ge,2),Ke=Ie[0],Xe=Ie[1],Ze=function(){Xe(!1)},$e=Te.errors,et=Te.touched,tt=Te.setFieldValue,at=Te.handleSubmit,nt=Te.setFieldError,rt=Te.getFieldProps;return Le?Object(B.jsx)(W.a,{}):Object(B.jsx)(B.Fragment,{children:ze?Object(B.jsx)(W.a,{}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("div",{className:"dashboard_header mb-4",children:[Object(B.jsxs)(u.a,{className:"dashboard_searchbox col-lg-4",children:[Object(B.jsx)(d.a,{children:Object(B.jsx)(M.a,{})}),Object(B.jsx)(R.c,{fullWidth:!0,sx:{flex:1},placeholder:"search role...",onChange:function(e){ge(e.target.value.trim())}})]}),Object(B.jsxs)(C.a,{direction:"row",className:"d-flex align-items-center",spacing:2,children:["1"==(null===Ce||void 0===Ce||null===(t=Ce.roles)||void 0===t?void 0:t.substring(1,2))?Object(B.jsx)(U.a,{title:"add role",placement:"bottom",children:Object(B.jsx)(F.a,{className:"dashboard_light_bg_icon_btn",onClick:function(){tt("name",""),Z("add"),Se(""),qe({users:"00000",category:"00000",sub_admin:"00000",trust_level:"00000",roles:"00000",trace_request:"00000",trace_history:"00000",configurable_fields:"00000",business_request:"00000"}),Xe(!0)},children:Object(B.jsx)(v.a,{style:{fontSize:18,color:"#6200ee"}})})}):"",Object(B.jsx)(U.a,{title:"refresh",placement:"bottom",children:Object(B.jsx)(F.a,{className:"dashboard_light_bg_icon_btn",children:Object(B.jsx)(y.a,{style:{fontSize:18,color:"#6200ee"}})})})]})]}),Object(B.jsx)(b.a,{children:Object(B.jsx)(j.a,{children:Object(B.jsxs)(h.a,{children:[Object(B.jsx)(w.a,{headLabel:[{id:"name",label:"name",alignRight:!1},{id:"createdAt",label:"date",alignRight:!1},{id:"action",label:"action",alignRight:!1}],rowCount:null===Je||void 0===Je||null===(a=Je.data)||void 0===a?void 0:a.length,onRequestSort:Ve}),Object(B.jsxs)(m.a,{children:[0!=_.length&&(null===_||void 0===_?void 0:_.filter((function(e){var t;return null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(fe.toLowerCase())})).map((function(e){var t;return Object(B.jsxs)(Ee,{children:[Object(B.jsx)(O.a,{component:"th",scope:"row",children:e.name}),Object(B.jsxs)(O.a,{align:"left",children:[" ",H()(e.createdAt).format("MMM DD YYYY h:mm A")]}),Object(B.jsx)(O.a,{children:Object(B.jsx)(C.a,{direction:"row",spacing:3,children:"1"==(null===Ce||void 0===Ce||null===(t=Ce.roles)||void 0===t?void 0:t.substring(3,4))?Object(B.jsx)(U.a,{title:"role edit",placement:"bottom",children:Object(B.jsx)(F.a,{sx:{"&:hover":{bgcolor:"transparent"}},onClick:function(){return function(e){qe(e.permission),tt("name",e.name),Se(e._id),Z("update"),Xe(!0)}(e)},variant:"text",className:"user_list_row_btn",children:Object(B.jsx)(q.a,{})})}):""})})]},e._id)}))),Ye>0&&Object(B.jsx)(o.a,{style:{height:53*Ye},children:Object(B.jsx)(O.a,{colSpan:6})})]}),He&&Object(B.jsx)(m.a,{children:Object(B.jsx)(o.a,{children:Object(B.jsx)(O.a,{align:"center",colSpan:6,sx:{py:3}})})})]})})}),Object(B.jsx)(z.a,{open:Ke,onClose:Ze,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:Object(B.jsxs)(f.a,{className:"modal_card modal_lg",children:[Object(B.jsxs)("div",{className:"modal_card_header",children:[Object(B.jsx)("div",{className:"left_part",children:Object(B.jsx)("h4",{children:X})}),Object(B.jsx)("div",{className:"right_part",children:Object(B.jsx)(F.a,{className:"dashboard_light_bg_icon_btn",onClick:Ze,"aria-label":"delete",children:Object(B.jsx)(V.a,{})})})]}),Object(B.jsx)("div",{className:"modal_card_body custom_scrollbar max_hight500",children:Object(B.jsx)(D.d,{value:Te,children:Object(B.jsxs)(D.c,{autoComplete:"off",noValidate:!0,onSubmit:at,children:[Object(B.jsx)("div",{className:"row",children:Object(B.jsx)("div",{className:"col-lg-12",children:Object(B.jsx)("div",{className:"form-group mb-4",children:Object(B.jsx)(A.a,Object(n.a)(Object(n.a)({label:"role name",autoComplete:"off",fullWidth:!0,variant:"outlined"},rt("name")),{},{error:Boolean(et.name&&$e.name),helperText:et.name&&$e.name}))})})}),Object(B.jsx)(j.a,{children:Object(B.jsxs)(h.a,{children:[Object(B.jsx)(w.a,{headLabel:[{id:"Permissions",label:"permissions",alignRight:!1},{id:"All",label:"all",alignRight:!1},{id:"List",label:"list",alignRight:!1},{id:"Add",label:"add",alignRight:!1},{id:"Delete",label:"delete",alignRight:!1},{id:"Update",label:"update",alignRight:!1},{id:"Export",label:"export",alignRight:!1}],rowCount:"7",onRequestSort:Ve}),Object(B.jsx)(m.a,{children:je.map((function(e,t){var a,n,r,c,s;return Object(B.jsxs)(Ee,{children:[Object(B.jsx)(O.a,{component:"th",scope:"row",children:e}),Object(B.jsxs)(O.a,{align:"left",children:[" ",Object(B.jsx)(g.a,{checked:"11111"==Ne[e],onChange:function(t){return a=t,Ne[e]=a.target.checked?"11111":"00000",void he(["users","category","chat_category","sub_admin","roles","trust_level","trace_request","trace_history","configurable_fields","business_request","group_chat_admin","employee_request","employee_history","event","posts"]);var a}})]}),Object(B.jsxs)(O.a,{align:"left",children:[" ",Object(B.jsx)(g.a,{checked:"1"==(null===(a=Ne[e])||void 0===a?void 0:a.substring(0,1)),onChange:function(t){return Qe(t,0,e)}})]}),Object(B.jsxs)(O.a,{align:"left",children:[" ",Object(B.jsx)(g.a,{checked:"1"==(null===(n=Ne[e])||void 0===n?void 0:n.substring(1,2)),onChange:function(t){return Qe(t,1,e)}})]}),Object(B.jsxs)(O.a,{align:"left",children:[" ",Object(B.jsx)(g.a,{checked:"1"==(null===(r=Ne[e])||void 0===r?void 0:r.substring(2,3)),onChange:function(t){return Qe(t,2,e)}})]}),Object(B.jsxs)(O.a,{align:"left",children:[" ",Object(B.jsx)(g.a,{checked:"1"==(null===(c=Ne[e])||void 0===c?void 0:c.substring(3,4)),onChange:function(t){return Qe(t,3,e)}})]}),Object(B.jsxs)(O.a,{align:"left",children:[" ",Object(B.jsx)(g.a,{checked:"1"==(null===(s=Ne[e])||void 0===s?void 0:s.substring(4,5)),onChange:function(t){return Qe(t,4,e)}})]})]},t)}))})]})}),Object(B.jsx)("div",{className:"col",children:Object(B.jsx)("div",{className:"col-md-8 m-auto",children:Object(B.jsx)(F.a,{type:"submit",fullWidth:!0,variant:"contained",className:"my-3 text-lowercase text-white app_bg_primary app_text_16_semibold app_btn_lg",children:"submit"})})})]})})}),Object(B.jsx)("div",{className:"modal_card_footer"})]})})]})})}},915:function(e,t,a){"use strict";var n=a(36);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(37)),c=a(0),s=(0,r.default)((0,c.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutlineOutlined");t.default=s}}]);
//# sourceMappingURL=39.f28168a4.chunk.js.map