(this["webpackJsonpbeemz-web"]=this["webpackJsonpbeemz-web"]||[]).push([[26],{1061:function(e,n,t){"use strict";t.r(n);var o=t(9),i=t(12),l=t.n(i),a=t(21),c=t(5),s=t(903),r=t(506),d=t(887),u=t(300),v=t(857),b=t(924),j=t(738),p=t(298),m=t(35),O=t.n(m),x=t(1),h=t.n(x),f=t(33),g=t(25),A=t(23),w=t(46),y=t(977),_=t.n(y),N=t(52),C=t(500),S=t(95),k=t.n(S),L=t(994),M=t(917),E=t(845),D=t(1063),Y=t(1064),R=t(60),I=t(934),F=(t(935),t(854)),T=t(321),z=t.n(T),B=t(0),q=h.a.forwardRef((function(e,n){return Object(B.jsx)(E.a,Object(o.a)({direction:"up",ref:n},e))})),P=Object(L.a)()((function(e){var n,t,o,i,l,a,s,v,b,j,p,m,h,f,g=e.onClose,A=e.open,w=e.locationData,y=e.centerPoint,_=e.googleMarker,N=Object(x.useState)({lat:-26.204444,lng:28.045556}),S=Object(c.a)(N,2),L=S[0],E=S[1],R=Object(x.useState)(["places"]),I=Object(c.a)(R,1)[0],T=Object(x.useState)(null),P=Object(c.a)(T,2),W=P[0],Z=P[1];Object(x.useEffect)((function(){var e;y&&(null===w||void 0===w||null===(e=w[0])||void 0===e||e.map((function(e,n){var t,o,i,l,a,c;E({lat:null===e||void 0===e||null===(t=e.location)||void 0===t||null===(o=t.location)||void 0===o||null===(i=o.coordinates)||void 0===i?void 0:i[1],lng:null===e||void 0===e||null===(l=e.location)||void 0===l||null===(a=l.location)||void 0===a||null===(c=a.coordinates)||void 0===c?void 0:c[0]})})))}),[y,w]);return Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)(C.a,{fullScreen:!0,open:A,TransitionComponent:q,children:[Object(B.jsx)(D.a,{sx:{position:"relative"},style:{backgroundColor:"#6E3FC6"},children:Object(B.jsx)(Y.a,{children:Object(B.jsx)(u.a,{edge:"start",color:"inherit",onClick:function(){E({lat:-26.204444,lng:28.045556}),g()},"aria-label":"close",sx:{position:"absolute",right:25,top:12},children:Object(B.jsx)(k.a,{})})})}),Object(B.jsx)(M.d,{googleMapsApiKey:"AIzaSyCI-T5kfFDaBGWiLZPAJXzbQa9v7miTYuE",libraries:I,children:Object(B.jsxs)(M.b,{mapContainerClassName:"w-100 h-100 position-relative",options:{streetViewControl:!1,scaleControl:!0,mapTypeControl:!1,panControl:!1,zoomControl:!0,rotateControl:!1},keyboardShortcuts:!1,draggable:!0,zoom:13,center:L,children:[1==y?null===w||void 0===w||null===(n=w[0])||void 0===n?void 0:n.map((function(e,n){var t,o,i,l,a,c;return Object(B.jsx)(M.e,{icon:{url:_},position:{lat:null===e||void 0===e||null===(t=e.location)||void 0===t||null===(o=t.location)||void 0===o||null===(i=o.coordinates)||void 0===i?void 0:i[1],lng:null===e||void 0===e||null===(l=e.location)||void 0===l||null===(a=l.location)||void 0===a||null===(c=a.coordinates)||void 0===c?void 0:c[0]},onMouseOver:function(){return Z(e)}},n)})):null===w||void 0===w?void 0:w.map((function(e,n){var t,o,i,l,a,c;return Object(B.jsx)(M.e,{icon:{url:_},position:{lat:null===e||void 0===e||null===(t=e.location)||void 0===t||null===(o=t.location)||void 0===o||null===(i=o.coordinates)||void 0===i?void 0:i[1],lng:null===e||void 0===e||null===(l=e.location)||void 0===l||null===(a=l.location)||void 0===a||null===(c=a.coordinates)||void 0===c?void 0:c[0]},onMouseOver:function(){return Z(e)},onClick:function(){return Z(e)}},n)})),Object(B.jsx)(B.Fragment,{children:W&&Object(B.jsx)(M.c,{position:{lng:W?null===W||void 0===W||null===(t=W.location)||void 0===t||null===(o=t.location)||void 0===o||null===(i=o.coordinates)||void 0===i?void 0:i[0]:null===W||void 0===W||null===(l=W.location)||void 0===l||null===(a=l.location)||void 0===a||null===(s=a.coordinates)||void 0===s?void 0:s[0],lat:W?null===W||void 0===W||null===(v=W.location)||void 0===v||null===(b=v.location)||void 0===b||null===(j=b.coordinates)||void 0===j?void 0:j[1]:null===W||void 0===W||null===(p=W.location)||void 0===p||null===(m=p.location)||void 0===m||null===(h=m.coordinates)||void 0===h?void 0:h[1]},children:Object(B.jsxs)("div",{className:"info_window_container",onMouseLeave:function(){Z(null)},children:[Object(B.jsx)(r.a,{children:Object(B.jsx)(d.a,{sx:{paddingLeft:"10px"},children:Object(B.jsx)(F.a,{className:"app_blank_btn d-flex align-items-start app_close_float_btn_topRight",sx:{height:"40px",width:"40px"},variant:"text",children:Object(B.jsx)(z.a,{style:{color:"#6200ee"}})})})}),Object(B.jsxs)(r.a,{className:"info_window_info_container",children:[Object(B.jsx)(d.a,{className:"app_text_16_semibold",children:O()(null===W||void 0===W?void 0:W.createdAt).format("DD-MM-YYYY")}),Object(B.jsx)(d.a,{className:"app_text_16_semibold",children:O()(null===W||void 0===W?void 0:W.createdAt).format("hh:mm A")}),Object(B.jsx)(d.a,{className:"app_text_12_fw500 app_text_gray",children:null===W||void 0===W||null===(f=W.location)||void 0===f?void 0:f.address})]})]})})})]})})]})})})),W=t(65),Z=t.n(W),K=t(90),V=t(91),X=t.n(V);n.default=function(){var e=Object(g.f)().state,n=Object(w.a)(),t=Object(x.useState)([]),i=Object(c.a)(t,2),m=i[0],h=i[1],y=Object(x.useState)([]),C=Object(c.a)(y,2),S=(C[0],C[1],Object(x.useState)(!1)),k=Object(c.a)(S,2),L=k[0],M=k[1],E=Object(x.useState)(!1),D=Object(c.a)(E,2),Y=D[0],F=D[1],T=Object(x.useState)(),z=Object(c.a)(T,2),q=z[0],W=z[1],V=Object(x.useState)([]),Q=Object(c.a)(V,2),H=Q[0],U=Q[1],G=Object(f.useQuery)("locationData",Object(a.a)(l.a.mark((function t(){var o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get(A.n.userLocation+(null===e||void 0===e||null===(o=e.user)||void 0===o?void 0:o.id)).then((function(e){return e.data}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),{refetchOnWindowFocus:!1}),J=G.isLoading,$=G.data,ee=Z.a.groupBy($,"date"),ne=Object.keys(ee).map((function(e){return{date:e,location:ee[e]}}));Object(x.useEffect)((function(){var e=[];null===ne||void 0===ne||ne.map((function(n){var t;null===n||void 0===n||null===(t=n.location)||void 0===t||t.map((function(n){var t,o,i,l,a,c,s,r,d,u,v={date:(null===n||void 0===n?void 0:n.createdAt)?O()(null===n||void 0===n?void 0:n.createdAt).format("MMM DD YYYY h:mm A"):"",address:(null===n||void 0===n||null===(t=n.location)||void 0===t?void 0:t.address)?null===n||void 0===n||null===(o=n.location)||void 0===o?void 0:o.address:"",coordinates:(null===n||void 0===n||null===(i=n.location)||void 0===i||null===(l=i.location)||void 0===l?void 0:l.coordinates)?(null===n||void 0===n||null===(a=n.location)||void 0===a||null===(c=a.location)||void 0===c||null===(s=c.coordinates)||void 0===s?void 0:s[1])+"-"+(null===n||void 0===n||null===(r=n.location)||void 0===r||null===(d=r.location)||void 0===d||null===(u=d.coordinates)||void 0===u?void 0:u[0]):""};e.push(v)}))})),U(e)}),[$]);var te={data:H,headers:[{label:"date",key:"date"},{label:"address",key:"address"},{label:"coordinates",key:"coordinates"}],filename:"beemz-users-location-logs.csv"},oe=function(e){h(null===e||void 0===e?void 0:e.user),M(null===e||void 0===e?void 0:e.center),F(!0),new Promise((function(n,t){var o;Z.a.isEmpty(null===e||void 0===e?void 0:e.user)?t("error"):null===e||void 0===e||null===(o=e.user)||void 0===o||o.map((function(e){var t;n(Object(I.a)(Object(R.b)(null===e||void 0===e||null===(t=e.userData)||void 0===t?void 0:t.photos,"image"),"#6200ee"))}))})).then((function(e){W(e)}),(function(e){}))};return Object(B.jsxs)(B.Fragment,{children:[J?Object(B.jsx)(N.a,{}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("div",{className:"dashboard_header mb-4",children:Object(B.jsx)("h4",{className:"app_text_20_semibold mb-0 d-flex align-items-center",children:"user locations"})}),Object(B.jsx)(s.a,{children:Object(B.jsx)("div",{className:"row",children:Object(B.jsxs)("div",{className:"col-lg-8",children:[Object(B.jsx)(r.a,{sx:{width:"100%",mt:2,bgcolor:"background.paper"},children:(null===ne||void 0===ne?void 0:ne.length)>0?null===ne||void 0===ne?void 0:ne.map((function(e){var n,t="checkbox-list-label-".concat(null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n._id);return Object(B.jsx)(d.a,{secondaryAction:Object(B.jsx)(u.a,{onClick:function(){return oe({center:!0,user:[null===e||void 0===e?void 0:e.location]})},edge:"end","aria-label":"comments",children:Object(B.jsx)(_.a,{sx:{color:"#6200EE"}})}),sx:{py:.8,borderBottom:"1px solid gainsboro"},disablePadding:!0,children:Object(B.jsx)(v.a,{role:void 0,dense:!0,children:Object(B.jsx)(b.a,{id:t,primary:O()(null===e||void 0===e?void 0:e.date).format("DD/MM/YYYY")})})},e.date)})):"user location not found"}),Object(B.jsx)(j.a,{sx:{mt:3,width:"100%",display:"flex",justifyContent:"center"},children:(null===$||void 0===$?void 0:$.length)>0?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(p.a,{onClick:function(){return oe({center:!1,user:$})},className:"app_text_transform",variant:"contained",sx:{bgcolor:"#6200EE","&:hover":{bgcolor:"#6200EE"},marginInline:"2px"},children:"show on map"}),Object(B.jsx)(K.CSVLink,Object(o.a)(Object(o.a)({},te),{},{children:Object(B.jsxs)(p.a,{className:"app_text_transform",variant:"contained",sx:{bgcolor:"#6200EE","&:hover":{bgcolor:"#6200EE"}},children:["export location logs",Object(B.jsx)(X.a,{style:{fontSize:18,color:"whitesmoke",margin:"2px"}})]})}))]}):""})]})})})]}),Object(B.jsx)(P,{googleMarker:q,centerPoint:L,locationData:m,open:Y,onClose:function(){F(!1),M(!1),h([])}})]})}},934:function(e,n,t){"use strict";function o(e,n){return new Promise((function(t,o){var i=document.createElement("CANVAS"),l=i.getContext("2d"),a=new Image;a.crossOrigin="Anonymous",a.src=e,a.onload=function(){var e;i.height=70,i.width=70;var o=i.width/2,c=i.height/2,s=o/2,r=o/2;return l.beginPath(),l.arc(o,c,r,0,2*Math.PI,!1),l.fillStyle="rgba(255,255,255, 1.0)",l.lineWidth=4,l.fill(),l.beginPath(),l.moveTo(35,c+s),l.lineTo(35,c+s+10),l.lineWidth=6,l.strokeStyle=n,l.stroke(),l.beginPath(),l.arc(o,c,s,0,2*Math.PI,!1),l.strokeStyle=n,l.lineWidth=6,l.stroke(),l.closePath(),l.clip(),l.drawImage(a,o/2.2,c/2.2,40,40),e=i.toDataURL(),t(e)},a.onerror=function(){a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAUKSURBVFiFtZfbb1RVFMZ/65zTaWeG6UxnpuVOoUOpQjFBuRhULjEgWggBpepf4FNF33wAcsLt1YAmJsY3TYAiBhRqeSAFwyUIQpRwtVS5lNLLtENv087Mme1D6TBtz3SmEL+3vdfaa31nn3XbwgRhmg1GhyM2V7eS85TCBSBCv6Vrd4IxR6Nprk5MxJ7k5rTWEdY960E2Cmo94M+g2qOgAeFgINFzxDSrYy9GQCnZuqf+gyTsFcXcXMimHb6Pkj3+5MXvTNNMTphAjVk3Q3Q5DLw+WmboOmUzC/H7nAgQ7orS9LCbhGWNpQEXDEls+XLbhuacCdTsrFuEyDGBmaNliysns3rZLFzOvBH7fdE4py7c5+qNVjuTLaKSm/btqLqYlcDWnSeWKdEaAOdo2Zo3Slm+aLqdgxTO/tHMqQv37ERRJbLqq23rfk/f1NIXn+2pn6pEO2Ln/KWyQFbnAG++Np2K2bYx6hSljtWYdTPsCSglyaT6CbD1smLJDLttW6xcOubPDWOK6HIIpVI3nyKwddfJj7EJOACP28HUYnfOBKaWuJnkcmQSL/90V/2HIwiYZq1DidqZ6YR3Un7Ozofh84xzRthbs78uP0WgyyjcAIQy6ccTGdM4IwZjY1MyDXOkW95LEVBKbRxPOxyJZjM4AgMxi87ugfGVFBsBNNNsMICq8XQTVpK/brfnTODarXYsK+utVW2prdW1iN5XTubansKZSw/o7s1a2on0DHL60oNceAZLGt0hzdKMsly0+/rjfH/0Op2RzFcbjkT54ecb9EfjuZhE4hIyNAuvyqknQkckyjcH/mTJK5NZEApQHHADivZwP9cbw1y61mrbDzIS0MVn5Krs9TioLA9QOqUAdwFoqodwWwQAXdOpLMtnzrRZ3Hs8wLU74Zx+F4CR1Hki48RL6bRCViyeSdksL53hDgai/ZCE9CPKGppB3A54tcLD28vn0HQvwm+XH3K/pTujbWWpiKFE7gpqLDNdY+1bs1lcOSXVsYr8Adpb4yQS9v9YNwx8RX4ECJX6KCv1cfnaY06e/dc2KzTNaNSCMUcjMIKmiLB57TyWpDkf3vcHg4iMDRoRwR8IomnP2osASxZOYfOacru+39FSEWnSTHN1AsWZdMnC8iAvh+wz0zDy8PkDY/Z9RX7y8uzr//y5ARaUB0cR5vjh6mprqBJqHEgXLpg3Unk0nE4X7kme1No9yYPTNX6zqqwYaVMhR+FpKR4sLv5RCY0pBwXZk6PQ6yM/vwCHI59Cry+rvqtgxAT1jz/R/WuKwLefLI5Lku3D0kdtvVkNighFgUDGmBiN5taeZwslXwxPzKmI2b993SEFFwDOX2nOqflomo6m6Vn1BmIW56+0DBGHc/u3v3M4ZSPtk5SuyfvAw+7eGAdP3CIWz72qZcJgzOLg8Zv09A0CtCQt9REiqbwfc3c1u+uXilKnAWeRt4D1q0KUzfQ+l/O79yOcOH2Xru5BgKgoVu7b8e6ldJ2cxvIZkz0sml9CxRw/blee3ZEUevtj3G7q4urNVppbU7H0SIlsGj0RZyQA8PnuX6ZbyqgFlqcr+7wFlATceFwGBflD2TIwmKCnL05bZz+RJwMj6qrAOcvSq7821z6y8/M/Ps24h2Lvcz/N0mGatY5Ow1P1dIyqAjJVqg4RjotSx3xWb92LP05tsKW2Vi9pdIc0pZeLpTwASpeepFh/t83tu3u4unpCqfMfIzLR3v5BgA8AAAAASUVORK5CYII=",a.onload()}}))}t.d(n,"a",(function(){return o}))},935:function(e,n,t){"use strict";var o=t(5),i=t(1),l=t(506),a=t(887),c=t(65),s=t.n(c),r=t(35),d=t.n(r),u=t(0);n.a=function(e){var n=e.userFullName,t=e.employeeData,c=e.isGroup,r=e.locationType,v=(e.userId,e.isBusiness),b=e.name,j=(e.profilePic,e.trustRating,e.distance),p=e.isOnline,m=e.onmouseleave,O=(e.chatPermission,e.selfAsContact,e.businessId,e.selectedMapOption,e.status,e.eventId),x=e.eventStartsOn,h=e.eventStartTime,f=e.eventDescription,g=Object(i.useState)(""),A=Object(o.a)(g,2),w=A[0],y=A[1];return Object(i.useEffect)((function(){v?y("business"):s.a.isEmpty(t)?y(c?"group":"geo"===r?"google":O?"event":"person"):y("employee")}),[t,v,r]),Object(u.jsxs)("div",{className:"info_window_container",onMouseLeave:m,children:[O?"":Object(u.jsx)("div",{className:"".concat(w," info_window_distance_container"),children:Object(u.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[Object(u.jsx)("span",{className:"app_text_16_semibold text-white mb-1",children:j}),Object(u.jsx)("span",{className:"app_text_16_500 text-white",children:"km"})]})}),Object(u.jsxs)(l.a,{className:"info_window_info_container",children:[Object(u.jsx)(a.a,{className:"app_text_16_500 ",children:n}),Object(u.jsx)(a.a,{className:"app_text_14 app_text_gray",children:f}),O?Object(u.jsxs)(a.a,{className:"app_text_12 app_text_gray ",children:[b?"@".concat(b):d()(x).format("MMM DD YYYY")+"-"+h||""," "]}):Object(u.jsx)(a.a,{children:Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsx)("span",{className:"live_status_badge ".concat(p?"online":"offline")}),Object(u.jsx)("span",{className:" app_text_12 app_text_gray ms-1",children:p?"Available":"not available now "})]})})]})]})}}}]);
//# sourceMappingURL=26.dd40b555.chunk.js.map