{"version":3,"sources":["pages/dashboard/ContactUs.jsx"],"names":["descendingComparator","a","b","orderBy","ContactUs","useState","page","setPage","rowsPerPage","setRowsPerPage","filterName","setFilterName","order","setOrder","setOrderBy","tableData","setTableData","axiosPrivate","useAxiosPrivate","loding","setLoding","CsvData","setCsvData","navigate","useNavigate","StyledTableRow","styled","TableRow","theme","backgroundColor","background","border","useEffect","arr","map","item","obj","name","email","message","subject","ticketNumber","createdAt","moment","format","push","csvReport","data","headers","label","key","filename","fetchContactUs","get","CONTACT_US_API_URL","contactUsList","params","search","limit","response","useQuery","keepPreviousData","isLoading","refetch","metadata","length","hasMoreData","setTimeout","filteredUsers","array","comparator","stabilizedThis","el","index","sort","applySortFilter","getComparator","className","fullWidth","sx","flex","placeholder","onChange","e","target","value","trim","direction","spacing","title","placement","style","fontSize","color","headLabel","id","alignRight","rowCount","total","onRequestSort","event","property","row","component","scope","variant","onClick","PATH_DASHBOARD","general","contactUsView","state","align","colSpan","py","rowsPerPageOptions","count","onPageChange","newPage","onRowsPerPageChange","parseInt"],"mappings":"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","file":"static/js/48.3a1a75e6.chunk.js","sourcesContent":["import { Button, Card, IconButton, InputBase, Paper, Table, TableBody, TableCell, TableContainer, TablePagination, TableRow, styled } from '@material-ui/core';\r\nimport { Stack } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useQuery } from 'react-query';\r\nimport { useNavigate } from 'react-router';\r\nimport { CONTACT_US_API_URL } from 'src/api/axios';\r\nimport LoadingScreen from 'src/components/LoadingScreen';\r\nimport AppTooltip from 'src/components/common/AppTooltip';\r\nimport UserListHead from 'src/components/user/UserListHead';\r\nimport useAxiosPrivate from 'src/hooks/useAxiosPrivate';\r\nimport { PATH_DASHBOARD } from 'src/routes/paths';\r\nimport SearchIcon from 'src/svgComponents/SearchIcon';\r\n// for csv\r\nimport { CSVLink } from \"react-csv\";\r\nimport FileUploadOutlinedIcon from '@mui/icons-material/FileUploadOutlined';\r\nimport useStore from \"src/contexts/AuthProvider\";\r\nimport moment from 'moment';\r\n\r\n\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\nfunction applySortFilter(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n\r\n  return stabilizedThis.map((el) => el[0]);\r\n}\r\nconst ContactUs = () => {\r\n\r\n\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(10);\r\n  const [filterName, setFilterName] = useState('');\r\n  const [order, setOrder] = useState('asc');\r\n  const [orderBy, setOrderBy] = useState('name');\r\n  const [tableData, setTableData] = useState([]);\r\n  const axiosPrivate = useAxiosPrivate();\r\n  const [loding, setLoding] = useState(true);\r\n  const [CsvData, setCsvData] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n\r\n  const StyledTableRow = styled(TableRow)(({ theme }) => ({\r\n    '&:nth-of-type(odd)': {\r\n      backgroundColor: '#ffffff',\r\n    },\r\n    '&:nth-of-type(even)': {\r\n      background: \"linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), #F4F5F7\",\r\n    },\r\n    // hide last border\r\n    '& td, & th': {\r\n      border: 0,\r\n    },\r\n  }));\r\n\r\n  const TABLE_HEAD = [\r\n    { id: 'name', label: 'user name', alignRight: false },\r\n    { id: 'email', label: 'email', alignRight: false },\r\n    { id: 'ticketNumber', label: 'ticket number', alignRight: false },\r\n    { id: 'createdAt', label: 'create on', alignRight: false },\r\n    { id: 'action', label: 'action', alignRight: false },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    var arr = [];\r\n    tableData.map((item) => {\r\n      var obj = {\r\n        \"name\": item?.name ? item?.name : '-',\r\n        \"email\": item?.email ? item?.email : '-',\r\n        \"message\": item?.message ? item?.message : '-',\r\n        \"subject\": item?.subject ? item?.subject : '-',\r\n        \"ticketNumber\": item?.ticketNumber ? item?.ticketNumber : '-',\r\n        \"createOn\": item?.createdAt ? moment(item?.createdAt).format('DD MMM YYYY') : \"-\"\r\n      }\r\n      arr.push(obj);\r\n    })\r\n    setCsvData(arr)\r\n  }, [tableData]);\r\n  const headers = [\r\n    { label: \"name\", key: \"name\" },\r\n    { label: \"name\", key: \"email\" },\r\n    { label: \"message\", key: \"message\" },\r\n    { label: \"subject\", key: \"subject\" },\r\n    { label: \"ticket number\", key: \"ticketNumber\" },\r\n    { label: \"createOn\", key: \"createOn\" },\r\n  ];\r\n  let csvReport = {\r\n    data: CsvData,\r\n    headers: headers,\r\n    filename: 'beemz-contact-us.csv'\r\n  };\r\n\r\n  async function fetchContactUs(page, filterName) {\r\n    const response = await axiosPrivate.get(CONTACT_US_API_URL.contactUsList, { params: { page: page + 1, search: filterName, limit: rowsPerPage } })\r\n\r\n    return response.data[0];\r\n  }\r\n\r\n  const { isLoading, data: contactUsList, refetch } = useQuery(['contactUsList', page, filterName], () => fetchContactUs(page, filterName), { keepPreviousData: true, })\r\n\r\n  useEffect(() => {\r\n    if (contactUsList) {\r\n      setTableData(contactUsList?.data);\r\n      setRowsPerPage(contactUsList?.metadata.length != 0 ? contactUsList?.metadata[0].limit : 10);\r\n    }\r\n    if (contactUsList?.metadata.length != 0 && contactUsList?.metadata[0].hasMoreData == true) {\r\n      fetchContactUs(page + 1);\r\n    }\r\n    setTimeout(() => {\r\n      setLoding(false);\r\n    }, 1800);\r\n  }, [contactUsList])\r\n\r\n\r\n\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n    setTimeout(() => {\r\n      refetch();\r\n    }, 500);\r\n  };\r\n  const handleFilterByName = (event) => {\r\n    setFilterName(event.target.value.trim());\r\n    fetchContactUs(page, filterName);\r\n  };\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleRequestView = (data) => {\r\n    navigate(PATH_DASHBOARD.general.contactUsView, { state: data })\r\n  }\r\n\r\n  const filteredUsers = applySortFilter(tableData, getComparator(order, orderBy));\r\n  return (\r\n    <>\r\n      {loding ? <LoadingScreen /> : <>\r\n        <div className=\"dashboard_header mb-4\">\r\n          {/* <h4 className=\"app_text_20_semibold mb-0 d-flex align-items-center\">Users</h4> */}\r\n          <Paper className='dashboard_searchbox col-lg-4'>\r\n            <IconButton>\r\n              <SearchIcon />\r\n            </IconButton>\r\n            <InputBase\r\n              fullWidth\r\n              sx={{ flex: 1 }}\r\n              placeholder=\"search username...\"\r\n              onChange={(e) => handleFilterByName(e)}\r\n            />\r\n          </Paper>\r\n          <Stack direction={\"row\"} className=\"d-flex align-items-center\" spacing={2}>\r\n\r\n            {/* csv */}\r\n\r\n            <AppTooltip title=\"export-contact-us\" placement=\"bottom\"><Button className=\"dashboard_light_bg_icon_btn\" ><CSVLink {...csvReport}><FileUploadOutlinedIcon style={{ fontSize: 18, color: \"#6200ee\" }} /></CSVLink></Button></AppTooltip>\r\n          </Stack>\r\n        </div>\r\n        <Card>\r\n          <TableContainer>\r\n            <Table>\r\n              <UserListHead\r\n                headLabel={TABLE_HEAD}\r\n                rowCount={contactUsList?.metadata.length !== 0 ? contactUsList?.metadata[0].total : 0}\r\n                onRequestSort={handleRequestSort}\r\n              />\r\n              {filteredUsers.length > 0 ?\r\n                <TableBody>\r\n                  {filteredUsers.map((row, key) => {\r\n                    return (\r\n                      <StyledTableRow key={key}>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                          {row?.name || '-'}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                          {row?.email || '-'}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                          {row?.ticketNumber || '-'}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                          {moment(row?.createdAt).format('DD MMM YYYY') ?? \"-\"}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Stack direction=\"row\" spacing={3}>\r\n                            <AppTooltip title=\"view contact-us details\" placement=\"bottom\"><Button className=\"theme_button_view\" variant=\"contained\" onClick={(e) => handleRequestView(row)} >view</Button></AppTooltip>\r\n\r\n                          </Stack>\r\n                        </TableCell>\r\n                      </StyledTableRow>\r\n                    )\r\n                  })}\r\n                </TableBody>\r\n                :\r\n                <TableBody>\r\n                  <TableRow>\r\n                    <TableCell align=\"center\" colSpan={5} sx={{ py: 5 }}>\r\n                      <span className=\"app_text_16_semibold\">no data found</span>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                </TableBody>}\r\n            </Table>\r\n          </TableContainer>\r\n          <TablePagination\r\n            component=\"div\"\r\n            rowsPerPageOptions={[10, 20, 50, 100]}\r\n            count={contactUsList?.metadata.length != 0 ? contactUsList?.metadata[0].total : 0}\r\n            rowsPerPage={rowsPerPage}\r\n            page={page}\r\n            onPageChange={handleChangePage}\r\n            onRowsPerPageChange={handleChangeRowsPerPage}\r\n          />\r\n        </Card>\r\n\r\n      </>\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ContactUs"],"sourceRoot":""}