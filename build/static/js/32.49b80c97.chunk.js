(this["webpackJsonpbeemz-web"]=this["webpackJsonpbeemz-web"]||[]).push([[32],{1060:function(e,a,t){"use strict";t.r(a);var s=t(12),n=t.n(s),r=t(21),i=t(5),c=t(1),l=t(741),d=t(854),o=t(862),b=t(863),u=t(864),j=t(865),m=t(742),h=t(25),O=t(32),x=t(89),p=t(7),f=t(35),v=t.n(f),g=t(356),_=t(852),N=t(31),y=t(915),w=t.n(y),D=t(914),k=t(870),C=t(500),S=t(501),q=t(899),A=t(754),H=t(61),B=t(53),F=t(46),I=t(23),T=t(33),V=t(52),W=t(9),L=t(745),z=t(748),M=t(298),R=t(19),$=t(300),E=t(95),Y=t.n(E),J=t(59),Q=t(357),Z=t(65),P=t.n(Z),U=t(925),X=t.n(U),G=t(749),K=t(902),ee=t(0),ae=function(e){var a=e.onClose,t=(e.open,e.addressData),s=e.businessId,i=e.userId,c=Object(F.a)(),l=Object(T.useQueryClient)(),d=Object(B.b)().enqueueSnackbar,o=function(){a()},b=R.d().shape({addressDetails:R.a().of(R.d().shape({email:R.e().email("email must be a valid email address").required("email is required"),mobile:R.e().matches(/(?=.*?\d)^\$?(([1-9]\d{0,2}(,\d{3})*)|\d+)?(\.\d{2,50})?$/,"invalid mobile number!.").min(10,"invalid Mobile Number!").required("mobile number is required"),businessName:R.b().required("businessName is required"),businessLocationName:R.b().required("busibess locationname is required"),physicalAddress:R.b().required("physical address is required"),description:R.b().required("description is required"),longitude:R.e().matches(/(?=.*?\d)^\$?(([1-9]\d{0,2}(,\d{3})*)|\d+)?(\.\d{2,50})?$/,"not valid.").required("longitude is required"),latitude:R.e().matches(/(?=.*?\d)^\$?(([1-9]\d{0,2}(,\d{3})*)|\d+)?(\.\d{2,50})?$/,"not valid.").required("latitude is required")}))}),u=Object(J.e)({initialValues:{addressDetails:t},validationSchema:b,onSubmit:function(){var e=Object(r.a)(n.a.mark((function e(a){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:return a.addressDetails.map((function(e){return e.mobile=e.mobile.includes("+")?e.mobile:"+"+e.mobile})),t={addressDetails:a.addressDetails,businessId:s,userId:i},e.next=6,j(t);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}),j=Object(T.useMutation)(function(){var e=Object(r.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.post(I.b.businessBulkAddress,JSON.stringify(a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),{onSuccess:function(e){e.data;a(),d("bulk address add successfully",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),l.invalidateQueries(["businessAddressList"])},onError:function(e){var a=e.response.data.errors;Object.keys(a).forEach((function(e){x(e,a[e])}))}}).mutateAsync,m=u.errors,h=u.touched,O=u.handleSubmit,x=u.setFieldError,p=u.values;return Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsx)(z.a,{open:!0,onClose:o,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:Object(ee.jsxs)(L.a,{className:"modal_card modal_lg",children:[Object(ee.jsxs)("div",{className:"modal_card_header",children:[Object(ee.jsx)("div",{className:"left_part",children:Object(ee.jsx)("h4",{children:"add bulk address"})}),Object(ee.jsx)("div",{className:"right_part",children:Object(ee.jsx)(M.a,{className:"dashboard_light_bg_icon_btn",onClick:o,"aria-label":"delete",children:Object(ee.jsx)(Y.a,{})})})]}),Object(ee.jsx)("div",{className:"modal_card_body custom_scrollbar max_hight500",children:Object(ee.jsx)(J.d,{value:u,children:Object(ee.jsxs)(J.c,{autoComplete:"off",noValidate:!0,onSubmit:O,children:[Object(ee.jsx)(J.b,{name:"addressDetails",children:function(e){var a=e.remove;return Object(ee.jsx)("div",{children:p.addressDetails.length>0&&p.addressDetails.map((function(e,s){return Object(ee.jsxs)("div",{children:[Object(ee.jsx)("br",{}),Object(ee.jsxs)("span",{className:"app_text_grey",children:["address ",s+1]}),Object(ee.jsx)(N.a,{title:"delete address",placement:"bottom",children:Object(ee.jsx)($.a,{"aria-label":"delete",sx:{color:"red"},onClick:function(){return a(s)},children:Object(ee.jsx)(X.a,{})})}),Object(ee.jsxs)("div",{className:"row row-cols-1 g-4",children:[Object(ee.jsxs)("div",{className:"col",children:[Object(ee.jsx)(J.a,{customeName:"addressDetails.".concat(s,".mobile"),name:"addressDetails.".concat(s,".mobile"),label:"enter your mobile number",component:Q.a,error:Boolean(P.a.get(h,"addressDetails.".concat(s,".mobile"),!1)&&P.a.get(m,"addressDetails.".concat(s,".mobile"),!1)),helperText:P.a.get(h,"addressDetails.".concat(s,".mobile"),!1)&&P.a.get(m,"addressDetails.".concat(s,".mobile"),!1),data:t[s].mobile&&Number(t[s].mobile)?"+"+t[s].mobile:null}),Object(ee.jsx)(G.a,{error:!0,children:P.a.get(h,"addressDetails.".concat(s,".mobile"),!1)&&P.a.get(m,"addressDetails.".concat(s,".mobile"),!1)})]}),Object(ee.jsx)("div",{className:"col",children:Object(ee.jsxs)("div",{className:"d-flex",children:[Object(ee.jsx)(J.a,{name:"addressDetails.".concat(s,".businessName"),render:function(e){var a=e.field;e.form;return Object(ee.jsx)(K.a,Object(W.a)(Object(W.a)({fullWidth:!0,variant:"outlined",label:"business name"},a),{},{error:Boolean(P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)),helperText:P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)}))}}),Object(ee.jsx)(J.a,{name:"addressDetails.".concat(s,".email"),render:function(e){var a=e.field;e.form;return Object(ee.jsx)(K.a,Object(W.a)(Object(W.a)({fullWidth:!0,label:"email",className:"ms-2",variant:"outlined"},a),{},{error:Boolean(P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)),helperText:P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)}))}})]})}),Object(ee.jsx)("div",{className:"col",children:Object(ee.jsx)(J.a,{name:"addressDetails.".concat(s,".businessLocationName"),render:function(e){var a=e.field;e.form;return Object(ee.jsx)(K.a,Object(W.a)(Object(W.a)({fullWidth:!0,variant:"outlined",label:"business address"},a),{},{error:Boolean(P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)),helperText:P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)}))}})}),Object(ee.jsx)("div",{className:"col",children:Object(ee.jsx)(J.a,{name:"addressDetails.".concat(s,".physicalAddress"),render:function(e){var a=e.field;e.form;return Object(ee.jsx)(K.a,Object(W.a)(Object(W.a)({fullWidth:!0,variant:"outlined",label:"physical address"},a),{},{error:Boolean(P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)),helperText:P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)}))}})}),Object(ee.jsx)("div",{className:"col",children:Object(ee.jsxs)("div",{className:"d-flex",children:[Object(ee.jsx)(J.a,{name:"addressDetails.".concat(s,".longitude"),render:function(e){var a=e.field;e.form;return Object(ee.jsx)(K.a,Object(W.a)(Object(W.a)({fullWidth:!0,variant:"outlined",label:"longitude"},a),{},{error:Boolean(P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)),helperText:P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)}))}}),Object(ee.jsx)(J.a,{name:"addressDetails.".concat(s,".latitude"),render:function(e){var a=e.field;e.form;return Object(ee.jsx)(K.a,Object(W.a)(Object(W.a)({className:"ms-2",fullWidth:!0,variant:"outlined",label:"latitude"},a),{},{error:Boolean(P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)),helperText:P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)}))}})]})}),Object(ee.jsx)("div",{className:"col",children:Object(ee.jsx)(J.a,{name:"addressDetails.".concat(s,".description"),render:function(e){var a=e.field;e.form;return Object(ee.jsx)(K.a,Object(W.a)(Object(W.a)({fullWidth:!0,variant:"outlined",label:"description"},a),{},{error:Boolean(P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)),helperText:P.a.get(h,a.name,!1)&&P.a.get(m,a.name,!1)}))}})})]})]},s)}))})}}),Object(ee.jsx)("div",{className:"col",children:Object(ee.jsx)("div",{className:"col-md-8 m-auto",children:Object(ee.jsx)(M.a,{type:"submit",fullWidth:!0,variant:"contained",className:"my-3 text-lowercase text-white app_bg_primary app_text_16_semibold app_btn_lg",children:"submit"})})})]})})}),Object(ee.jsx)("div",{className:"modal_card_footer"})]})})})},te=t(976),se=t(60);a.default=function(){var e=Object(c.useState)(),a=Object(i.a)(e,2),t=a[0],s=a[1],f=Object(h.g)(),y=Object(h.f)().state,W=Object(B.b)().enqueueSnackbar,L=Object(F.a)(),z=Object(c.useState)(""),M=Object(i.a)(z,2),R=M[0],$=M[1],E=Object(c.useState)(!1),Y=Object(i.a)(E,2),J=Y[0],Q=Y[1],Z=Object(H.a)(),U=Object(k.a)(Z.breakpoints.down("md")),X=Object(c.useState)(!0),G=Object(i.a)(X,2),K=G[0],ne=G[1],re=Object(c.useState)([]),ie=Object(i.a)(re,2),ce=ie[0],le=ie[1],de=Object(c.useState)(!1),oe=Object(i.a)(de,2),be=oe[0],ue=oe[1];Object(c.useEffect)((function(){s(null===y||void 0===y?void 0:y.businessData),setTimeout((function(){ne(!1)}),1800)}),[y]);var je=function(){Q(!1)},me=Object(p.a)(l.a)((function(e){e.theme;return{"&:nth-of-type(odd)":{backgroundColor:"#ffffff"},"&:nth-of-type(even)":{background:"linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), #F4F5F7"},"& td, & th":{border:0}}})),he=Object(T.useQuery)("addressList",function(){var e=Object(r.a)(n.a.mark((function e(a){var t,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.signal,e.next=3,L.get(I.b.getBusinessAddress+(null===y||void 0===y||null===(t=y.businessData)||void 0===t?void 0:t._id),{signal:s}).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1}),Oe=he.data,xe=he.refetch,pe=function(){var e=Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return je(),e.next=3,L.delete(I.b.deteleBusinessAddress+R);case 3:200==e.sent.status?W("address delete successfully",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}):W("something went wrong",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),xe();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsx)(ee.Fragment,{children:K?Object(ee.jsx)(V.a,{}):Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)("div",{className:"dashboard_header mb-4",children:[Object(ee.jsx)("h4",{className:"app_text_20_semibold mb-0 d-flex align-items-center",children:"user business address"}),Object(ee.jsxs)(_.a,{direction:"row",className:"d-flex align-items-center",spacing:2,children:[Object(ee.jsx)(N.a,{title:"add business address",placement:"bottom",children:Object(ee.jsx)(d.a,{className:"dashboard_light_bg_icon_btn",onClick:function(){f(O.c.general.businessAddressAdd,{state:{data:{userId:null===t||void 0===t?void 0:t.userId,businessId:null===t||void 0===t?void 0:t._id}}})},children:Object(ee.jsx)(w.a,{style:{fontSize:18,color:"#6200ee"}})})}),Object(ee.jsx)(N.a,{title:"add bulk business address",placement:"bottom",children:Object(ee.jsxs)(d.a,{fullWidth:!0,variant:"contained",className:"my-3 text-capitalize app_bg_primary_medium app_text_primary app_text_16_semibold app_btn_lg",component:"label",children:[Object(ee.jsx)("input",{hidden:!0,name:"document",accept:" .xlsx,.csv",onInput:function(e){var a=e.target.files[0];if(!a)return!1;if(["xlsx","csv"].includes(a.name.split(".").pop())){var t=new FileReader;t.onload=function(e){var a=e.target.result,t=te.a(a,{type:"binary"}),s=t.SheetNames[0],n=t.Sheets[s],r=te.b.sheet_to_csv(n,{header:1});le(Object(se.c)(r)),ue(!0)},t.readAsBinaryString(a)}else ue(!1),W("only accept Xlsx and csv file.",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3})},type:"file"}),"add bulk address"]})})]})]}),Object(ee.jsxs)(C.a,{fullScreen:U,open:J,onClose:je,"aria-labelledby":"responsive-dialog-title",children:[Object(ee.jsx)(S.a,{id:"responsive-dialog-title",className:"m-auto",children:"are you sure you want to delete?"}),Object(ee.jsx)(q.a,{}),Object(ee.jsxs)(A.a,{className:"m-auto",children:[Object(ee.jsx)(d.a,{className:"theme_button_view",variant:"contained",autoFocus:!0,onClick:je,children:"cancel"}),Object(ee.jsx)(d.a,{className:"theme_button",variant:"contained",onClick:function(){return pe()},autoFocus:!0,children:"delete"})]})]}),Object(ee.jsx)(o.a,{children:Object(ee.jsx)(b.a,{children:Object(ee.jsxs)(u.a,{children:[Object(ee.jsx)(x.a,{headLabel:[{id:"name",label:"address name",alignRight:!1},{id:"email",label:"email",alignRight:!1},{id:"mobile",label:"mobile",alignRight:!1},{id:"createdAt",label:"date",alignRight:!1},{id:"action",label:"action",alignRight:!1}]}),(null===Oe||void 0===Oe?void 0:Oe.length)>0?Object(ee.jsx)(j.a,{children:null===Oe||void 0===Oe?void 0:Oe.map((function(e,a){return Object(ee.jsxs)(me,{children:[Object(ee.jsx)(m.a,{component:"th",scope:"row",children:null===e||void 0===e?void 0:e.physicalAddress}),Object(ee.jsx)(m.a,{component:"th",scope:"row",children:null===e||void 0===e?void 0:e.email}),Object(ee.jsx)(m.a,{align:"left",children:null===e||void 0===e?void 0:e.mobile}),Object(ee.jsx)(m.a,{align:"left",children:v()(e.createdAt).format("MMM DD YYYY h:mm A")}),Object(ee.jsx)(m.a,{children:Object(ee.jsxs)(_.a,{direction:"row",spacing:1,children:[Object(ee.jsx)(N.a,{title:"business address edit",placement:"bottom",children:Object(ee.jsx)(d.a,{sx:{"&:hover":{bgcolor:"transparent"}},onClick:function(){return a=e,void f(O.c.general.businessAddressUpdate,{state:{businessAddressData:a}});var a},variant:"text",className:"user_list_row_btn",children:Object(ee.jsx)(g.a,{})})}),(null===e||void 0===e?void 0:e.primaryAddress)?"":Object(ee.jsx)(N.a,{title:"business address delete",placement:"bottom",children:Object(ee.jsx)(d.a,{variant:"text",className:"user_list_row_btn",onClick:function(){return a=e._id,$(a),void Q(!0);var a},children:Object(ee.jsx)(D.a,{})})})]})})]},a)}))}):Object(ee.jsx)(j.a,{children:Object(ee.jsx)(l.a,{children:Object(ee.jsx)(m.a,{align:"center",colSpan:5,sx:{py:5},children:Object(ee.jsx)("span",{className:"app_text_16_semibold",children:"no data found"})})})})]})})}),!P.a.isEmpty(ce)&&Object(ee.jsx)(ae,{addressData:ce,businessId:null===t||void 0===t?void 0:t._id,userId:null===t||void 0===t?void 0:t.userId,open:be,onClose:function(e){xe(),ue(!1),le([])}})]})})}},914:function(e,a,t){"use strict";t(1);var s=t(0);a.a=function(){return Object(s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(s.jsx)("path",{d:"M5.625 2.875H5.5C5.56875 2.875 5.625 2.81875 5.625 2.75V2.875H10.375V2.75C10.375 2.81875 10.4312 2.875 10.5 2.875H10.375V4H11.5V2.75C11.5 2.19844 11.0516 1.75 10.5 1.75H5.5C4.94844 1.75 4.5 2.19844 4.5 2.75V4H5.625V2.875ZM13.5 4H2.5C2.22344 4 2 4.22344 2 4.5V5C2 5.06875 2.05625 5.125 2.125 5.125H3.06875L3.45469 13.2969C3.47969 13.8297 3.92031 14.25 4.45312 14.25H11.5469C12.0813 14.25 12.5203 13.8313 12.5453 13.2969L12.9312 5.125H13.875C13.9438 5.125 14 5.06875 14 5V4.5C14 4.22344 13.7766 4 13.5 4Z",fill:"#d40f0f"}),Object(s.jsx)("path",{d:"M11.4266 13.125H4.57344L4.19531 5.125H11.8047L11.4266 13.125Z",fill:"white"})]})}}}]);
//# sourceMappingURL=32.49b80c97.chunk.js.map