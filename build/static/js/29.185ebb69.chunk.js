(this["webpackJsonpbeemz-web"]=this["webpackJsonpbeemz-web"]||[]).push([[29],{1012:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return ue}));var n=t(3),i=t(9),s=t(12),r=t.n(s),c=t(21),l=t(5),o=t(1),d=t(741),u=t(862),b=t(863),j=t(864),m=t(865),h=t(742),O=t(869),p=t(745),f=t(910),v=t(7),x=t(915),g=t.n(x),_=t(135),w=t.n(_),y=t(33),N=t(23),S=t(89),C=t(46),k=t(356),H=t(914),z=t(852),L=t(299),V=t(300),F=t(68),P=t(298),A=t(748),q=t(902),D=t(749),R=t(895),E=t(893),M=t(885),W=t(879),T=t(25),B=t(69),J=t(59),I=t(19),Z=t(53),Q=t(95),U=t.n(Q),G=t(358),K=t.n(G),X=t(438),Y=t.n(X),$=t(437),ee=t.n($),ae=t(870),te=t(500),ne=t(501),ie=t(899),se=t(754),re=t(61),ce=t(52),le=t(34),oe=t(31),de=t(0);t(65);function ue(){var e,a,t,s=Object(o.useState)([]),x=Object(l.a)(s,2),_=x[0],Q=x[1],G=Object(o.useState)([]),X=Object(l.a)(G,2),$=X[0],ue=X[1],be=Object(o.useState)(0),je=Object(l.a)(be,2),me=je[0],he=(je[1],Object(o.useState)("")),Oe=Object(l.a)(he,2),pe=Oe[0],fe=Oe[1],ve=Object(o.useState)(5),xe=Object(l.a)(ve,2),ge=xe[0],_e=xe[1],we=Object(o.useState)("asc"),ye=Object(l.a)(we,2),Ne=ye[0],Se=ye[1],Ce=Object(o.useState)("name"),ke=Object(l.a)(Ce,2),He=ke[0],ze=ke[1],Le=Object(o.useState)(""),Ve=Object(l.a)(Le,2),Fe=Ve[0],Pe=Ve[1],Ae=Object(C.a)(),qe=(Object(T.g)(),Object(Z.b)().enqueueSnackbar),De=Object(o.useState)(""),Re=Object(l.a)(De,2),Ee=Re[0],Me=Re[1],We=Object(o.useState)(""),Te=Object(l.a)(We,2),Be=Te[0],Je=Te[1],Ie=Object(o.useState)(null),Ze=Object(l.a)(Ie,2),Qe=Ze[0],Ue=Ze[1],Ge=Object(o.useState)(null),Ke=Object(l.a)(Ge,2),Xe=(Ke[0],Ke[1]),Ye=Object(o.useState)(""),$e=Object(l.a)(Ye,2),ea=$e[0],aa=$e[1],ta=Object(le.c)((function(e){return e.permissions})),na=Object(o.useState)(!0),ia=Object(l.a)(na,2),sa=ia[0],ra=ia[1],ca=Object(o.useState)(""),la=Object(l.a)(ca,2),oa=la[0],da=la[1],ua=Object(o.useState)(!1),ba=Object(l.a)(ua,2),ja=ba[0],ma=ba[1],ha=Object(re.a)(),Oa=Object(ae.a)(ha.breakpoints.down("md")),pa=Object(v.a)(d.a)((function(e){e.theme;return{"&:nth-of-type(odd)":{backgroundColor:"#ffffff"},"&:nth-of-type(even)":{background:"linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), #F4F5F7"},"& td, & th":{border:0}}})),fa=Object(o.useState)({password:"",showPassword:!1}),va=Object(l.a)(fa,2),xa=va[0],ga=va[1];function _a(e){return wa.apply(this,arguments)}function wa(){return(wa=Object(c.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.get(N.n.adminList,{params:{search:a}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ya=Object(y.useQuery)(["subAdminList",Fe],(function(){return _a(Fe)}),{keepPreviousData:!0}),Na=ya.isLoading,Sa=ya.data,Ca=ya.refetch;function ka(){return(ka=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.get(N.k.getRoleList);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ha=Object(y.useQuery)(["roleList"],(function(){return function(){return ka.apply(this,arguments)}()}),{keepPreviousData:!0}),za=(Ha.isLoading,Ha.data);Ha.refetch;Object(o.useEffect)((function(){Sa&&(Q(Sa.data?[]:Sa),_e(10)),setTimeout((function(){ra(!1)}),1800)}),[Sa]),Object(o.useEffect)((function(){za&&ue(za.data?[]:za)}),[za]);me>0&&Math.max(0,(1+me)*ge-(null===Sa||void 0===Sa||null===(e=Sa.data)||void 0===e?void 0:e.length)),null===_||void 0===_||_.length;var La,Va=I.d().shape({name:I.e().min(2,"name can set of between 2 and 50 characters!").max(50,"name can set of between 2 and 50 characters!").required("name is required"),admin_email:I.e().email("email must be a valid email address").required("email is required"),admin_password:I.e().required("password is required")}),Fa=Object(J.e)({initialValues:{name:"",admin_email:""},validationSchema:Va,onSubmit:function(){var e=Object(c.a)(r.a.mark((function e(a,t){var n,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.resetForm,t.setFieldError,i=t.setSubmitting,s={username:a.name,email:a.admin_email,adminrole:Ee,mobile:""!=Be?"+"+Be:null},""!=ea){e.next=8;break}return s.password=a.admin_password,e.next=6,Aa(s);case 6:e.next=11;break;case 8:return s.admin_id=ea,e.next=11,Pa(s);case 11:n(),Xe(null),Ue(null),i(!1);case 15:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()}),Pa=Object(y.useMutation)(function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.put(N.n.subAdminUpdate,JSON.stringify(a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),{onSuccess:function(e){e.data;Ca(),qe("sub admin update successfully ",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),Ma()},onError:function(e){var a,t,n=e.response.data.errors;(null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)&&Xe(e.response.data.message),Object.keys(n).forEach((function(e){"username"===e?Ua("name",n[e]):"email"===e?Ua("admin_email",n[e]):"password"===e?Ua("admin_password",n[e]):"mobile"===e?Ue(n[e]):"adminrole"===e?Xe(n[e]):Ua(e,n[e])}))}}).mutateAsync,Aa=Object(y.useMutation)(function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.post(N.n.subAdmin,JSON.stringify(a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),{onSuccess:function(e){e.data;Ca(),qe("sub admin add successfully ",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),Ma()},onError:function(e){var a,t,n=e.response.data.errors;(null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)&&Xe(e.response.data.message),Object.keys(n).forEach((function(e){"username"===e?Ua("name",n[e]):"email"===e?Ua("admin_email",n[e]):"password"===e?Ua("admin_password",n[e]):"mobile"===e?Ue(n[e]):"adminrole"===e?Xe(n[e]):Ua(e,n[e])}))}}).mutateAsync,qa=Object(o.useState)(!1),Da=Object(l.a)(qa,2),Ra=Da[0],Ea=Da[1],Ma=function(){Ea(!1)},Wa=function(){ma(!1)},Ta=function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.delete(N.n.deleteAdmin+oa);case 2:200==(a=e.sent).status?qe(a.data.message,{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}):qe("something went wrong",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),Ca(),Wa();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ba=function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ra(!0),e.next=3,Ae.put(N.n.adminInactive+a);case 3:200==e.sent.status?(Ca(),qe("status change successfully.",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),setTimeout((function(){ra(!1)}),1e3)):(qe("something went wrong.",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),ra(!1));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Ja=Fa.errors,Ia=Fa.touched,Za=Fa.setFieldValue,Qa=Fa.handleSubmit,Ua=Fa.setFieldError,Ga=Fa.getFieldProps;return Na?Object(de.jsx)(ce.a,{}):Object(de.jsx)(de.Fragment,{children:sa?Object(de.jsx)(ce.a,{}):Object(de.jsxs)(de.Fragment,{children:[Object(de.jsxs)("div",{className:"dashboard_header mb-4",children:[Object(de.jsxs)(L.a,{className:"dashboard_searchbox col-lg-4",children:[Object(de.jsx)(V.a,{children:Object(de.jsx)(B.a,{})}),Object(de.jsx)(F.c,{fullWidth:!0,sx:{flex:1},placeholder:"search sub admin...",onChange:function(e){return Pe(e.target.value.trim()),void _a(Fe)}})]}),Object(de.jsxs)(z.a,{direction:"row",className:"d-flex align-items-center",spacing:2,children:["1"==(null===ta||void 0===ta||null===(a=ta.sub_admin)||void 0===a?void 0:a.substring(1,2))?Object(de.jsx)(oe.a,{title:"add sub-admin",placement:"bottom",children:Object(de.jsx)(P.a,{className:"dashboard_light_bg_icon_btn",onClick:function(){Za("name",""),Za("admin_email",""),Je(""),fe("add"),Me(""),aa(""),Za("admin_password",""),Ea(!0)},children:Object(de.jsx)(g.a,{style:{fontSize:18,color:"#6200ee"}})})}):"",Object(de.jsx)(oe.a,{title:"refresh",placement:"bottom",children:Object(de.jsx)(P.a,{className:"dashboard_light_bg_icon_btn",children:Object(de.jsx)(w.a,{style:{fontSize:18,color:"#6200ee"}})})})]})]}),Object(de.jsxs)(te.a,{fullScreen:Oa,open:ja,onClose:Wa,"aria-labelledby":"responsive-dialog-title",children:[Object(de.jsx)(ne.a,{id:"responsive-dialog-title",className:"m-auto",children:"Are you sure you want to delete?"}),Object(de.jsx)(ie.a,{}),Object(de.jsxs)(se.a,{className:"m-auto",children:[Object(de.jsx)(P.a,{className:"theme_button_view",variant:"contained",autoFocus:!0,onClick:Wa,children:"Cancel"}),Object(de.jsx)(P.a,{className:"theme_button",variant:"contained",onClick:function(){return Ta()},autoFocus:!0,children:"Delete"})]})]}),Object(de.jsx)(u.a,{children:Object(de.jsx)(b.a,{children:Object(de.jsxs)(j.a,{children:[Object(de.jsx)(S.a,{headLabel:[{id:"name",label:"name",alignRight:!1},{id:"email",label:"email",alignRight:!1},{id:"mobile",label:"mobile number",alignRight:!1},{id:"status",label:"enabled",alignRight:!1},{id:"role",label:"role",alignRight:!1},{id:"action",label:"action",alignRight:!1}],rowCount:null===Sa||void 0===Sa||null===(t=Sa.data)||void 0===t?void 0:t.length,onRequestSort:function(e,a){Se(He===a&&"asc"===Ne?"desc":"asc"),ze(a)}}),_.length>0?Object(de.jsx)(m.a,{children:0!=_.length&&_.map((function(e){var a,t,n,i;return Object(de.jsxs)(pa,{children:[Object(de.jsx)(h.a,{component:"th",scope:"row",children:e.name}),Object(de.jsxs)(h.a,{align:"left",children:["  ",e.email]}),Object(de.jsxs)(h.a,{align:"left",children:["  ",e.mobile]}),Object(de.jsx)(h.a,{align:"left",children:Object(de.jsx)(oe.a,{title:"change status",placement:"bottom",children:Object(de.jsx)(O.a,{checked:"Active"==e.status,onChange:"1"==(null===ta||void 0===ta||null===(a=ta.sub_admin)||void 0===a?void 0:a.substring(3,4))?function(){return Ba(e.id)}:"",defaultChecked:!0})})}),Object(de.jsxs)(h.a,{align:"left",children:["  ",null===e||void 0===e||null===(t=e.adminrole)||void 0===t?void 0:t.name]}),Object(de.jsx)(h.a,{children:Object(de.jsxs)(z.a,{direction:"row",spacing:3,children:["1"==(null===ta||void 0===ta||null===(n=ta.sub_admin)||void 0===n?void 0:n.substring(3,4))?Object(de.jsx)(oe.a,{title:"sub-admin edit",placement:"bottom",children:Object(de.jsx)(P.a,{sx:{"&:hover":{bgcolor:"transparent"}},onClick:function(){return function(e){var a;Za("name",e.name),Za("admin_email",e.email),Za("admin_password","123456"),Je(e.mobile.replace("+","")),Me(null===e||void 0===e||null===(a=e.adminrole)||void 0===a?void 0:a.id),aa(e._id),fe("update"),Ea(!0)}(e)},variant:"text",className:"user_list_row_btn",children:Object(de.jsx)(k.a,{})})}):"","1"==(null===ta||void 0===ta||null===(i=ta.sub_admin)||void 0===i?void 0:i.substring(2,3))?Object(de.jsx)(oe.a,{title:"sub-admin delete",placement:"bottom",children:Object(de.jsx)(P.a,{variant:"text",onClick:function(){return a=e._id,da(a),void ma(!0);var a},className:"user_list_row_btn",children:Object(de.jsx)(H.a,{})})}):""]})})]},e._id)}))}):Object(de.jsx)(m.a,{children:Object(de.jsx)(d.a,{children:Object(de.jsx)(h.a,{align:"center",colSpan:6,sx:{py:5},children:Object(de.jsx)("span",{className:"app_text_16_semibold",children:"no data found"})})})})]})})}),Object(de.jsx)(A.a,{open:Ra,onClose:Ma,"aria-labelledby":"child-modal-title",disableScrollLock:"false","aria-describedby":"child-modal-description",children:Object(de.jsxs)(p.a,{className:"modal_card modal_lg",children:[Object(de.jsxs)("div",{className:"modal_card_header",children:[Object(de.jsx)("div",{className:"left_part",children:Object(de.jsx)("h4",{children:pe})}),Object(de.jsx)("div",{className:"right_part",children:Object(de.jsx)(P.a,{className:"dashboard_light_bg_icon_btn",onClick:Ma,"aria-label":"delete",children:Object(de.jsx)(U.a,{})})})]}),Object(de.jsx)("div",{className:"modal_card_body",children:Object(de.jsx)("div",{className:"custom_scrollbar",children:Object(de.jsx)(J.d,{value:Fa,children:Object(de.jsxs)(J.c,{autoComplete:"off",noValidate:!0,onSubmit:Qa,children:[Object(de.jsxs)("div",{className:"row",children:[Object(de.jsx)("div",{className:"col-12",children:Object(de.jsx)("div",{className:"user_edit_header mb-4",children:Object(de.jsx)("h4",{className:"app_text_14_semibold mb-0",children:"sub admin information"})})}),Object(de.jsx)("div",{className:"col-lg-6",children:Object(de.jsx)("div",{className:"form-group mb-4",children:Object(de.jsx)(q.a,Object(i.a)(Object(i.a)({label:"name",autoComplete:"off",fullWidth:!0,variant:"outlined"},Ga("name")),{},{error:Boolean(Ia.name&&Ja.name),helperText:Ia.name&&Ja.name}))})}),Object(de.jsx)("div",{className:"col-lg-6",children:Object(de.jsx)("div",{className:"form-group mb-4",children:Object(de.jsx)(q.a,Object(i.a)(Object(i.a)({label:"email",type:"email",autoComplete:"off",fullWidth:!0,variant:"outlined"},Ga("admin_email")),{},{error:Boolean(Ia.admin_email&&Ja.admin_email),helperText:Ia.admin_email&&Ja.admin_email}))})}),Object(de.jsx)("div",{className:"col-lg-6",children:Object(de.jsxs)("div",{className:"form-group mb-4",children:[Object(de.jsx)(K.a,{inputProps:{style:{width:"100%"},name:"phone1",required:!0},value:Be,country:"za",specialLabel:"mobile number",onChange:function(e){return Je(e)}}),Object(de.jsx)(D.a,{error:!!Qe,children:Qe})]})}),"add"==pe?Object(de.jsx)("div",{className:"col-lg-6",children:Object(de.jsx)("div",{className:"form-group mb-4",children:Object(de.jsx)(q.a,Object(i.a)(Object(i.a)({id:"outlined-adornment-password",fullWidth:!0,autoComplete:"off",type:xa.showPassword?"text":"password",label:"password",value:xa.password,onChange:(La="admin_password",function(e){ga(Object(i.a)(Object(i.a)({},xa),{},Object(n.a)({},La,e.target.value)))})},Ga("admin_password")),{},{error:Boolean(Ia.admin_password&&Ja.admin_password),helperText:Ia.admin_password&&Ja.admin_password,InputProps:{endAdornment:Object(de.jsx)(R.a,{position:"end",children:Object(de.jsx)(V.a,{sx:{"&:hover":{bgcolor:"transparent"}},disableRipple:!0,"aria-label":"toggle password visibility",onClick:function(){ga(Object(i.a)(Object(i.a)({},xa),{},{showPassword:!xa.showPassword}))},edge:"end",children:xa.showPassword?Object(de.jsx)(Y.a,{}):Object(de.jsx)(ee.a,{})})})}}))})}):"",Object(de.jsx)("div",{className:"col-lg-12",children:Object(de.jsx)("div",{className:"form-group mb-4",children:Object(de.jsxs)(E.a,{fullWidth:!0,children:[Object(de.jsx)(M.a,{id:"demo-simple-select-label",children:"role"}),Object(de.jsx)(W.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"role",defaultValue:Ee,onChange:function(e){return Me(e.target.value)},children:$.map((function(e,a){return Object(de.jsx)(f.a,{value:e._id,children:e.name},a)}))})]})})})]}),Object(de.jsx)("div",{className:"col",children:Object(de.jsx)("div",{className:"col-md-8 m-auto",children:Object(de.jsx)(P.a,{type:"submit",fullWidth:!0,variant:"contained",className:"my-3 text-lowercase text-white app_bg_primary app_text_16_semibold app_btn_lg",children:"submit"})})})]})})})}),Object(de.jsx)("div",{className:"modal_card_footer"})]})})]})})}},914:function(e,a,t){"use strict";t(1);var n=t(0);a.a=function(){return Object(n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(n.jsx)("path",{d:"M5.625 2.875H5.5C5.56875 2.875 5.625 2.81875 5.625 2.75V2.875H10.375V2.75C10.375 2.81875 10.4312 2.875 10.5 2.875H10.375V4H11.5V2.75C11.5 2.19844 11.0516 1.75 10.5 1.75H5.5C4.94844 1.75 4.5 2.19844 4.5 2.75V4H5.625V2.875ZM13.5 4H2.5C2.22344 4 2 4.22344 2 4.5V5C2 5.06875 2.05625 5.125 2.125 5.125H3.06875L3.45469 13.2969C3.47969 13.8297 3.92031 14.25 4.45312 14.25H11.5469C12.0813 14.25 12.5203 13.8313 12.5453 13.2969L12.9312 5.125H13.875C13.9438 5.125 14 5.06875 14 5V4.5C14 4.22344 13.7766 4 13.5 4Z",fill:"#d40f0f"}),Object(n.jsx)("path",{d:"M11.4266 13.125H4.57344L4.19531 5.125H11.8047L11.4266 13.125Z",fill:"white"})]})}},915:function(e,a,t){"use strict";var n=t(36);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(t(37)),s=t(0),r=(0,i.default)((0,s.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutlineOutlined");a.default=r}}]);
//# sourceMappingURL=29.185ebb69.chunk.js.map