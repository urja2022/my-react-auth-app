(this["webpackJsonpbeemz-web"]=this["webpackJsonpbeemz-web"]||[]).push([[49],{1029:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Z}));var n=a(12),i=a.n(n),l=a(9),c=a(21),s=a(5),o=a(1),r=a(741),d=a(875),u=a(910),b=a(862),j=a(863),v=a(864),h=a(865),O=a(742),m=a(869),p=a(884),g=a(7),x=a(135),f=a.n(x),_=a(33),w=a(23),y=a(89),k=a(46),S=a(852),D=a(299),C=a(300),Y=a(68),N=a(893),M=a(298),R=a(891),z=a(69),I=a(53),L=a(52),P=a(34),F=a(31),E=a(35),T=a.n(E),A=a(242),V=a(90),q=a(91),G=a.n(q),H=a(359),J=a.n(H),W=a(32),Q=a(25),U=a(356),B=a(366),K=a.n(B),X=(a(65),a(0));a(65);function Z(){var e,t,a,n=Object(o.useState)([]),x=Object(s.a)(n,2),E=x[0],q=x[1],H=Object(o.useState)(0),B=Object(s.a)(H,2),Z=B[0],$=B[1],ee=Object(o.useState)(10),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],ie=Object(o.useState)("asc"),le=Object(s.a)(ie,2),ce=le[0],se=le[1],oe=Object(o.useState)("name"),re=Object(s.a)(oe,2),de=re[0],ue=re[1],be=Object(o.useState)(""),je=Object(s.a)(be,2),ve=je[0],he=je[1],Oe=Object(k.a)(),me=Object(P.c)((function(e){return e.permissions})),pe=Object(o.useState)(!0),ge=Object(s.a)(pe,2),xe=ge[0],fe=ge[1],_e=Object(I.b)().enqueueSnackbar,we=Object(o.useState)(!1),ye=Object(s.a)(we,2),ke=ye[0],Se=ye[1],De=Object(o.useState)(!1),Ce=Object(s.a)(De,2),Ye=Ce[0],Ne=Ce[1],Me=Object(o.useState)([]),Re=Object(s.a)(Me,2),ze=Re[0],Ie=Re[1],Le=Object(o.useState)(1),Pe=Object(s.a)(Le,2),Fe=Pe[0],Ee=Pe[1],Te=Object(Q.g)(),Ae=Object(g.a)(r.a)((function(e){e.theme;return{"&:nth-of-type(odd)":{backgroundColor:"#ffffff"},"&:nth-of-type(even)":{background:"linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), #F4F5F7"},"& td, & th":{border:0}}}));Object(o.useEffect)((function(){var e=[];E.map((function(t){var a={title:(null===t||void 0===t?void 0:t.title)?null===t||void 0===t?void 0:t.title:"-",description:(null===t||void 0===t?void 0:t.description)?null===t||void 0===t?void 0:t.description:"-","event date":(null===t||void 0===t?void 0:t.eventDate)?T()(null===t||void 0===t?void 0:t.eventDate).format("MMM DD YYYY h:mm A"):"-","event time":(null===t||void 0===t?void 0:t.time)?null===t||void 0===t?void 0:t.time:"-",duration:(null===t||void 0===t?void 0:t.duration)?(null===t||void 0===t?void 0:t.duration)+" days":"-",type:(null===t||void 0===t?void 0:t.businessId)?"business":"user",status:1==(null===t||void 0===t?void 0:t.status)?"enable":"disable"};e.push(a)})),Ie(e)}),[E]);var Ve={data:ze,headers:[{label:"title",key:"title"},{label:"description",key:"description"},{label:"event date",key:"event date"},{label:"event time",key:"event time"},{label:"duration",key:"duration"},{label:"type",key:"type"},{label:"status",key:"status"}],filename:"beemz-events.csv"};function qe(e,t,a){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(c.a)(i.a.mark((function e(t,a,n){var l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get(w.n.eventList,{params:{page:t+1,search:a,limit:ae,eventStatus:n}});case 2:return l=e.sent,e.abrupt("return",l.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var He=Object(_.useQuery)(["eventList",Z,ve,Fe],(function(){return qe(Z,ve,Fe)}),{keepPreviousData:!0}),Je=He.isLoading,We=He.data,Qe=He.refetch;Object(o.useEffect)((function(){We&&(q(null===We||void 0===We?void 0:We.data),ne(0!=(null===We||void 0===We?void 0:We.metadata.length)?null===We||void 0===We?void 0:We.metadata[0].limit:10)),setTimeout((function(){fe(!1)}),1800)}),[We]);Z>0&&Math.max(0,(1+Z)*ae-(null===We||void 0===We||null===(e=We.data)||void 0===e?void 0:e.length));function Ue(){return(Ue=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fe(!0),e.next=3,Oe.put(w.n.eventInactive+t);case 3:200==e.sent.status?(Qe(),_e("status change successfully ",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),setTimeout((function(){fe(!1)}),500)):(_e("something went wrong",{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:2e3}),fe(!1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Be=function(e,t){"view"===t?Te(W.c.general.eventDetails,{state:{eventData:e}}):"edit"===t?Te(W.c.general.userEventEdit,{state:{eventData:e}}):Te(W.c.general.eventInvitedUserList,{state:{eventId:e._id}})};return Je?Object(X.jsx)(L.a,{}):Object(X.jsx)(X.Fragment,{children:xe?Object(X.jsx)(L.a,{}):Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("div",{className:"dashboard_header mb-4",children:[Object(X.jsxs)(D.a,{className:"dashboard_searchbox col-lg-4",children:[Object(X.jsx)(C.a,{children:Object(X.jsx)(z.a,{})}),Object(X.jsx)(Y.c,{fullWidth:!0,sx:{flex:1},placeholder:"search event...",onChange:function(e){return he(e.target.value.trim()),void qe(Z,ve,Fe)}})]}),Object(X.jsx)("div",{className:"form-group w-25",children:Object(X.jsx)(N.a,{fullWidth:!0,children:Object(X.jsxs)(d.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"filter",defaultValue:Fe,onChange:function(e){return function(e){Ee(e.target.value),Qe()}(e)},children:[Object(X.jsx)(u.a,{value:"1",children:" all "}),Object(X.jsx)(u.a,{value:"2",children:" upcoming "}),Object(X.jsx)(u.a,{value:"3",children:" posted "}),Object(X.jsx)(u.a,{value:"4",children:" canceled "})]})})}),Object(X.jsxs)(S.a,{direction:"row",className:"d-flex align-items-center",spacing:2,children:[Object(X.jsx)(F.a,{title:"refresh",placement:"bottom",children:Object(X.jsx)(M.a,{className:"dashboard_light_bg_icon_btn",children:Object(X.jsx)(f.a,{style:{fontSize:18,color:"#6200ee"}})})}),"1"==(null===me||void 0===me||null===(t=me.event)||void 0===t?void 0:t.substring(1,2))?Object(X.jsx)(F.a,{title:"export-event",placement:"bottom",children:Object(X.jsx)(M.a,{className:"dashboard_light_bg_icon_btn",children:Object(X.jsx)(V.CSVLink,Object(l.a)(Object(l.a)({},Ve),{},{children:Object(X.jsx)(G.a,{style:{fontSize:18,color:"#6200ee"}})}))})}):""]})]}),Object(X.jsxs)(b.a,{children:[Object(X.jsx)(j.a,{children:Object(X.jsxs)(v.a,{children:[Object(X.jsx)(y.a,{headLabel:[{id:"title",label:"title",alignRight:!1},{id:"eventDate",label:"event date",alignRight:!1},{id:"time",label:"event time",alignRight:!1},{id:"duration",label:"duration",alignRight:!1},{id:"type",label:"type",alignRight:!1},{id:"noOfGuest",label:"total no. of guest",alignRight:!1},{id:"event status",label:"event status",alignRight:!1},{id:"status",label:"status",alignRight:!1},{id:"action",label:"action",alignRight:!1}],rowCount:null===We||void 0===We||null===(a=We.data)||void 0===a?void 0:a.length,onRequestSort:function(e,t){se(de===t&&"asc"===ce?"desc":"asc"),ue(t)}}),(null===E||void 0===E?void 0:E.length)>0?Object(X.jsx)(h.a,{children:0!=E.length&&(null===E||void 0===E?void 0:E.map((function(e){var t,a=T()().format("MMM DD YYYY hh:mm"),n=T()(null===e||void 0===e?void 0:e.eventDateTime).format("MMM DD YYYY hh:mm");return Object(X.jsxs)(Ae,{children:[Object(X.jsxs)(O.a,{component:"th",scope:"row",children:[" ",e.title," "]}),Object(X.jsxs)(O.a,{align:"left",children:[" ",T()(null===e||void 0===e?void 0:e.eventDate).format("MMM DD YYYY")," "]}),Object(X.jsxs)(O.a,{align:"left",children:[" ",T()(null===e||void 0===e?void 0:e.time,"hh:mm A").format("hh:mm A")," "]}),Object(X.jsxs)(O.a,{align:"left",children:[" ",(null===e||void 0===e?void 0:e.duration)?(null===e||void 0===e?void 0:e.duration)+" hours":""," "]}),Object(X.jsxs)(O.a,{align:"left",children:[" ",(null===e||void 0===e?void 0:e.businessId)?"business":"user"," "]}),Object(X.jsxs)(O.a,{align:"left",children:[" ",null!==(t=null===e||void 0===e?void 0:e.noOfGuest)&&void 0!==t?t:"-"," "]}),Object(X.jsx)(O.a,{align:"left",children:1===(null===e||void 0===e?void 0:e.isCancle)?Object(X.jsx)(R.a,{label:"canceled",className:"app_status_chip invalid"}):a<n?Object(X.jsx)(R.a,{label:"upcoming",className:"app_status_chip accepted"}):Object(X.jsx)(R.a,{label:"posted",className:"app_status_chip posted"})}),Object(X.jsx)(O.a,{align:"left",children:1===(null===e||void 0===e?void 0:e.isCancle)?Object(X.jsx)(m.a,{checked:1===e.status}):Object(X.jsx)(F.a,{title:"change status",placement:"bottom",children:Object(X.jsx)(m.a,{checked:1===e.status,onChange:function(){return function(e){return Ue.apply(this,arguments)}(e._id)},defaultChecked:!0})})}),Object(X.jsx)(O.a,{children:Object(X.jsxs)(S.a,{direction:"row",spacing:3,children:[Object(X.jsx)(F.a,{title:"event edit",placement:"bottom",children:Object(X.jsx)(M.a,{sx:{"&:hover":{bgcolor:"transparent"}},onClick:function(){return Be(e,"edit")},variant:"text",className:"user_list_row_btn",children:Object(X.jsx)(U.a,{})})}),Object(X.jsx)(F.a,{title:"event view",placement:"bottom",children:Object(X.jsx)(M.a,{sx:{"&:hover":{bgcolor:"transparent"}},onClick:function(){return Be(e,"view")},variant:"text",className:"user_list_row_btn",children:Object(X.jsx)(J.a,{})})}),Object(X.jsx)(F.a,{title:"invited users",placement:"bottom",children:Object(X.jsx)(M.a,{sx:{"&:hover":{bgcolor:"transparent"}},onClick:function(){return Be(e,"invite")},variant:"text",className:"user_list_row_btn",children:Object(X.jsx)(K.a,{})})}),Object(X.jsx)(F.a,{title:"export-events",placement:"bottom",children:Object(X.jsx)(M.a,{className:"dashboard_light_bg_icon_btn",children:Object(X.jsx)(V.CSVLink,Object(l.a)(Object(l.a)({},Ve),{},{children:Object(X.jsx)(G.a,{style:{fontSize:18,color:"#6200ee"}})}))})})]})})]},e._id)})))}):Object(X.jsx)(h.a,{children:Object(X.jsx)(r.a,{children:Object(X.jsx)(O.a,{align:"center",colSpan:7,sx:{py:5},children:Object(X.jsx)("span",{className:"app_text_16_semibold",children:"no data found"})})})})]})}),Object(X.jsx)(p.a,{component:"div",rowsPerPageOptions:[10,20,50,100],count:0!=(null===We||void 0===We?void 0:We.metadata.length)?null===We||void 0===We?void 0:We.metadata[0].total:0,rowsPerPage:ae,page:Z,onPageChange:function(e,t){$(t)},onRowsPerPageChange:function(e){ne(parseInt(e.target.value,10)),$(0),setTimeout((function(){Qe()}),500)}}),Object(X.jsx)(A.a,{newLinkId:Ye,open:ke,onClose:function(e){Se(!1),Ne(!1)}})]})]})})}}}]);
//# sourceMappingURL=49.a8ed1217.chunk.js.map